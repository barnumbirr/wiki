{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Personal wiki built with MkDocs,  Material for MkDocs,  giscus and deployed with Github Actions.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Use the edit button on the top right and create a pull request or open an issue.</p>"},{"location":"#license","title":"License","text":"<pre><code>Copyright 2021-2024 Martin Simon\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n</code></pre>"},{"location":"#buy-me-a-coffee","title":"Buy me a coffee?","text":"<p>If you feel like buying me a coffee (or a beer?), donations are welcome:</p> <pre><code>BTC : bc1qq04jnuqqavpccfptmddqjkg7cuspy3new4sxq9\nDOGE: DRBkryyau5CMxpBzVmrBAjK6dVdMZSBsuS\nETH : 0x2238A11856428b72E80D70Be8666729497059d95\nLTC : MQwXsBrArLRHQzwQZAjJPNrxGS1uNDDKX6\n</code></pre>"},{"location":"cars/tyres/","title":"Tyres","text":"","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#makes-and-models","title":"Makes and models","text":"","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#michelin","title":"Michelin","text":"","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#pilot-sport-3","title":"Pilot Sport 3","text":"<p>The PS3 promises fantastic road holding through corners, superb efficiency and impressive tyre life. A good every-day road road tyre.</p>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#pilot-super-sport","title":"Pilot Super Sport","text":"<p>A fast road tyre suitable for occasional track use. Whether you\u2019re accelerating flat out in a straight line or cornering at high speed, you still get optimum grip. When cornering, the shape of the contact patch changes but the amount of rubber in contact with the road surface stays the same.</p>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#pilot-sport-4-s","title":"Pilot Sport 4 S","text":"<p>The new generation of road tyre from Michelin, suitable for normal road use and replaces the highly popular and highly rated Michelin Pilot Super Sport, released back in 2011.. Continuously adapts to the road, optimising contact for better handling and fuel efficiency. \u201cDynamic response\u201d technology: a hybrid belt of aramid and nylon ensures the optimum transmission between steering instruction and the road.</p>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#pilot-sport-cup-2","title":"Pilot Sport Cup 2","text":"<p>Michelin's road legal track tyre, fantastic on track but still performs very well on the road. Slower wear of the outer shoulder and reinforced external shoulder with special rubber - highly resistant to abrasion for improved endurance / track longevity.</p>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#resources","title":"Resources","text":"<ul> <li>Michelin Pilot Sport 4 S vs. Pilot Super Sport Tire Review - Sept. 2020</li> <li>Michelin Pilot Sport 4 vs Pilot Sport 4 S vs Cup 2 - Aug. 2018</li> </ul> <p>     Source: K-TEC Racing </p>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#bridgestone","title":"Bridgestone","text":"","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#potenza-s001","title":"Potenza S001","text":"<p>Fitted as standard on M\u00e9gane 4 R.S Trophy 19-inch \"Jerez\" wheels.  </p> <p>Note</p> <p>Cooked after 4 laps at Spa-Francorchamps in 25\u00b0 weather using 1.8/1.7 bar of pressure.</p>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#potenza-s007","title":"Potenza S007","text":"<p>Fitted on optional \"Fujilight\" 19-inch wheel. Not tested.</p>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#tyre-pressures","title":"Tyre pressures","text":"<p>The recommended pressures are given for cold tyres. In case of high temperatures (circuits/tyre), you are recommended to reduce the front tyre pressures. RenaultSport recommend not exceeding 2.5 bars when hot at the front.</p> <p>Note</p> <p>Do not forget to readjust the tyre pressures before leaving the circuit to avoid damaging the tyres and to comply with regulations! The recommended circuit pressures are less than the minimum legal pressures on road and increase fuel consumption.</p>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#adjustments","title":"Adjustments","text":"Front (bars) Rear (bars) In case of understeer +0.2 In case of oversteer -0.2 <p>Note</p> <ul> <li>In case of understeer upon corner entry, RenaultSport recommend increasing  the rear tyre pressures.  </li> <li>To reduce oversteer, decrease the rear tyre pressures.</li> </ul>","tags":["Tires","Michelin'"]},{"location":"cars/tyres/#megane-iv-rs-trophy","title":"M\u00e9gane IV R.S Trophy","text":"<p>After switching to Michelin Pilot Sport 4 S XL (245/35 R19 Y93), try the following pressures:</p> Front (bars) Rear (bars) Road Set-up (Sport) 2.2 2.0 Quick Track (Dry) 2.0 1.9 Quick Track (Wet) 2.2 2.2 Slow Track (Dry) 1.9 2.1 Slow Track (Wet) 2.2 2.2","tags":["Tires","Michelin'"]},{"location":"devops/cloudflare/","title":"Cloudflare","text":"","tags":["Cloudflare","CDN","DNS"]},{"location":"devops/cloudflare/#debugging","title":"Debugging","text":"","tags":["Cloudflare","CDN","DNS"]},{"location":"devops/cloudflare/#self-inflicted-dns-cache-poisoning","title":"Self-inflicted DNS cache poisoning","text":"<p>Cloudflare suddenly and randomly starts returning the following when accessing <code>support.example.com</code>:</p> <pre><code>Please stand by, while we are checking your browser...\n\nRayID: 699eaa277be49730\nIP: 162.159.90.246\n</code></pre> <p>A quick DNS looking returns:</p> <pre><code>$ dig support.example.com\n\n; &lt;&lt;&gt;&gt; DiG 9.16.15-Debian &lt;&lt;&gt;&gt; support.example.com\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 21805\n;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;support.example.com.                IN      A\n\n;; ANSWER SECTION:\nsupport.example.com. 92      IN      A       104.25.11.76\nsupport.example.com. 92      IN      A       104.25.14.76\nsupport.example.com. 92      IN      A       172.69.12.65\n\n;; Query time: 0 msec\n;; SERVER: 10.0.1.1#53(10.0.1.1)\n;; WHEN: Wed Oct 06 15:02:00 CEST 2021\n;; MSG SIZE  rcvd: 88\n</code></pre> <p>From our Cloudflare DNS zone we know that <code>support.example.com</code> is a CNAME entry for another CNAME, <code>example.zendesk.com</code>, the DNS lookup of which is as follows:</p> <pre><code>$ dig example.zendesk.com\n\n; &lt;&lt;&gt;&gt; DiG 9.16.15-Debian &lt;&lt;&gt;&gt; example.zendesk.com\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 1008\n;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 4, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;example.zendesk.com.                IN      A\n\n;; ANSWER SECTION:\nexample.zendesk.com. 79      IN      A       104.16.57.111\nexample.zendesk.com. 79      IN      A       104.16.55.111\n\n;; AUTHORITY SECTION:\nzendesk.com.            669     IN      NS      ns-2011.awsdns-59.co.uk.\nzendesk.com.            669     IN      NS      ns-709.awsdns-24.net.\nzendesk.com.            669     IN      NS      ns-1219.awsdns-24.org.\nzendesk.com.            669     IN      NS      ns-128.awsdns-16.com.\n\n;; Query time: 0 msec\n;; SERVER: 10.0.1.1#53(10.0.1.1)\n;; WHEN: Wed Oct 06 15:02:03 CEST 2021\n;; MSG SIZE  rcvd: 212\n</code></pre> <p>There is a clear IP mismatch between the upstream CNAME and the records in our zone. This is due to the Cloudflare DNS entry being proxied. Switching the entry to <code>DNS only</code> fixes the issue immediately:</p> <pre><code>$ dig support.example.com\n\n; &lt;&lt;&gt;&gt; DiG 9.16.15-Debian &lt;&lt;&gt;&gt; support.example.com\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 31557\n;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;support.example.com.                IN      A\n\n;; ANSWER SECTION:\nsupport.example.com. 300     IN      CNAME   example.zendesk.com.\nexample.zendesk.com. 300     IN      A       104.16.57.111\nexample.zendesk.com. 300     IN      A       104.16.55.111\n\n;; Query time: 20 msec\n;; SERVER: 10.0.1.1#53(10.0.1.1)\n;; WHEN: Wed Oct 06 15:07:24 CEST 2021\n;; MSG SIZE  rcvd: 108\n</code></pre>","tags":["Cloudflare","CDN","DNS"]},{"location":"devops/docker/","title":"Docker","text":"","tags":["docker","container","virtualization"]},{"location":"devops/docker/#usage","title":"Usage","text":"","tags":["docker","container","virtualization"]},{"location":"devops/docker/#list-images-by-descending-size","title":"List images by descending size","text":"<pre><code>$ docker images --format '{{.Size}}\\t{{.Repository}}\\t{{.Tag}}\\t{{.ID}}' | sed 's/ //' | sort -h -r | column -t\n</code></pre>","tags":["docker","container","virtualization"]},{"location":"devops/docker/#cleaning-up","title":"Cleaning up","text":"","tags":["docker","container","virtualization"]},{"location":"devops/docker/#remove-all-dangling-data","title":"Remove all dangling data","text":"<p>Delete all dangling data (i.e. in order: stopped containers, volumes without containers and images with no containers). Even unused data, with <code>-a/--all</code> option.</p> <pre><code>$ docker system prune\n</code></pre>","tags":["docker","container","virtualization"]},{"location":"devops/docker/#remove-dangling-containers","title":"Remove dangling containers","text":"<pre><code>$ docker containers prune\n</code></pre>","tags":["docker","container","virtualization"]},{"location":"devops/docker/#remove-dangling-images","title":"Remove dangling images","text":"<pre><code>$ docker image prune\n</code></pre>","tags":["docker","container","virtualization"]},{"location":"devops/docker/#remove-dangling-volumes","title":"Remove dangling volumes","text":"<pre><code>$ docker volume prune\n</code></pre>","tags":["docker","container","virtualization"]},{"location":"devops/docker/#remove-dangling-networks","title":"Remove dangling networks","text":"<pre><code>$ docker network prune\n</code></pre>","tags":["docker","container","virtualization"]},{"location":"devops/docker/#remove-tagged-images-older-than-a-month","title":"Remove tagged images older than a month","text":"<pre><code>$ docker images --no-trunc --format '{{.ID}} {{.CreatedSince}}' \\\n    | grep ' months' | awk '{ print $1 }' \\\n    | xargs --no-run-if-empty docker rmi\n</code></pre>","tags":["docker","container","virtualization"]},{"location":"devops/icinga/","title":"Icinga","text":"","tags":["icinga","monitoring","observability"]},{"location":"devops/icinga/#directories-and-file-locations","title":"Directories and file locations","text":"","tags":["icinga","monitoring","observability"]},{"location":"devops/icinga/#plugins","title":"Plugins","text":"<pre><code>$ /usr/lib/nagios/plugins\n</code></pre>","tags":["icinga","monitoring","observability"]},{"location":"devops/icinga/#command-definitions","title":"Command definitions","text":"<pre><code>$ /usr/share/icinga2/include/command-plugins.conf\n</code></pre>","tags":["icinga","monitoring","observability"]},{"location":"devops/icinga/#show-commands-executed-by-icinga","title":"Show commands executed by Icinga","text":"<pre><code>$ icinga2 feature enable debuglog\n$ service icinga2 restart\n$ tail -f /var/log/icinga2/debug.log\n</code></pre>","tags":["icinga","monitoring","observability"]},{"location":"devops/icinga/#list-hosts","title":"List hosts","text":"<pre><code>$ icinga2 object list --type Host\n</code></pre>","tags":["icinga","monitoring","observability"]},{"location":"devops/prometheus/","title":"Prometheus","text":"","tags":["prometheus","monitoring","observability"]},{"location":"devops/prometheus/#installation-and-updates","title":"Installation and updates","text":"","tags":["prometheus","monitoring","observability"]},{"location":"devops/prometheus/#update-binary-installation","title":"Update binary installation","text":"<pre><code>$ prometheus --version\nprometheus, version 2.28.1 (branch: HEAD, revision: b0944590a1c9a6b35dc5a696869f75f422b107a1)\n  build user:       root@2915dd495090\n  build date:       20210701-15:20:10\n  go version:       go1.16.5\n  platform:         linux/amd64\n$ curl -s https://api.github.com/repos/prometheus/prometheus/releases/latest | grep browser_download_url | grep linux-amd64 | cut -d '\"' -f 4 | wget -i -\n$ tar xvf prometheus-2.29.2.linux-amd64.tar.gz\n$ mv prometheus-2.29.2.linux-amd64/{prometheus,promtool} /usr/local/bin/\n$ prometheus --version\nprometheus, version 2.29.2 (branch: HEAD, revision: 752c4f11ae86effa9a46f017f2feb66730c67ed8)\n  build user:       root@61bcc9848ade\n  build date:       20210827-09:44:22\n  go version:       go1.16.7\n  platform:         linux/amd64\n$ service prometheus restart\n</code></pre>","tags":["prometheus","monitoring","observability"]},{"location":"devops/prometheus/#configuration","title":"Configuration","text":"","tags":["prometheus","monitoring","observability"]},{"location":"devops/prometheus/#prometheus-data-retention","title":"Prometheus data retention","text":"<p>While Prometheus' data retention is set to 15 days by default, it can easily be configured one of two ways: by <code>size</code> or by <code>time</code>.  </p> <p>Size-based retention is set using the <code>--storage.tsdb.retention.size</code> flag,  specifying a maximum amount of disk space used by blocks. Time-based retention is set using the <code>--storage.tsdb.retention.time</code> flag, specifying the time range which Prometheus will keep available. This is a minimum, so it'll keep an entire block if some of it is still within the retention window.</p> <p>Simply edit Prometheus' service file <code>/etc/systemd/system/prometheus.service</code></p> <pre><code>[...]\n[Service]\nType=simple\nUser=prometheus\nGroup=prometheus\n#ExecReload=/bin/kill -HUP \\$MAINPID\nExecStart=/usr/local/bin/prometheus \\\n  --config.file=/etc/prometheus/prometheus.yml \\\n  --storage.tsdb.path=/var/lib/prometheus \\\n  --storage.tsdb.retention.size=200GB \\\n  --web.console.templates=/etc/prometheus/consoles \\\n  --web.console.libraries=/etc/prometheus/console_libraries \\\n  --web.listen-address=0.0.0.0:9090 \\\n  --web.external-url= \\\n  --web.enable-admin-api\n[...]\n</code></pre>","tags":["prometheus","monitoring","observability"]},{"location":"devops/prometheus/#probing-multiple-dns-servers-with-blackbox-exporter","title":"Probing multiple DNS servers with Blackbox exporter","text":"<pre><code>  - job_name: 'DNS'\n    scrape_interval: 300s\n    metrics_path: /probe\n    relabel_configs:\n    # You can set internal labels that are called __param_&lt;name&gt;.\n    # Those set URL parameter with the key &lt;name&gt; for the scrape request.\n    # https://prometheus.io/docs/guides/multi-target-exporter/\n    # Populate domain label with domain portion of __address__\n      - source_labels: [__address__]\n        regex: (.*):.*$\n        replacement: $1\n        target_label: domain\n      # Populate instance label with dns server IP portion of __address__\n      - source_labels: [__address__]\n        regex: .*:(.*)$\n        replacement: $1\n        target_label: instance\n      # Populate module URL parameter with domain portion of __address__\n      # This is a parameter passed to the blackbox exporter\n      - source_labels: [domain]\n        target_label: __param_module\n      # Populate target URL parameter with dns server IP\n      - source_labels: [instance]\n        target_label: __param_target\n      # Populate __address__ with the address of the blackbox exporter to hit\n      - target_label: __address__\n        # Real address of blackbox exporter (Assumed to be running on port 9115 on localhost)\n        replacement: localhost:9115\n    static_configs:\n    - targets:\n      - example.com:9.9.9.9\n      - example.com:1.1.1.1\n      - example.com:127.0.0.1\n</code></pre> <p>     Source: prometheus/blackbox_exporter </p>","tags":["prometheus","monitoring","observability"]},{"location":"devops/prometheus/#usage","title":"Usage","text":"","tags":["prometheus","monitoring","observability"]},{"location":"devops/prometheus/#delete-timeseries-metrics","title":"Delete timeseries metrics","text":"<p>Time series in Prometheus can be deleted over administrative HTTP API only (disabled by default).</p> <p>To enabled it, pass <code>--web.enable-admin-api</code> flag to Prometheus through start-up script or docker-compose file, depending on installation method.</p> <p>Use the following syntax to delete all time series metrics that match some label:</p> <pre><code>$ curl -X POST -g 'http://localhost:9090/api/v1/admin/tsdb/delete_series?match[]={foo=\"bar\"}'\n</code></pre> <p>To delete time series metrics that match some job or instance, run:</p> <pre><code>$ curl -X POST -g 'http://localhost:9090/api/v1/admin/tsdb/delete_series?match[]={job=\"node_exporter\"}'\n$ curl -X POST -g 'http://localhost:9090/api/v1/admin/tsdb/delete_series?match[]={instance=\"10.0.1.100:9100\"}'\n</code></pre> <p>To delete all data from Prometheus, run:</p> <pre><code>$ curl -X POST -g 'http://localhost:9090/api/v1/admin/tsdb/delete_series?match[]={__name__=~\".+\"}'\n</code></pre> <p>Note that the above API calls don\u2019t delete data immediately.</p> <p>The actual data still exists on disk and will be cleaned up in future compaction.</p> <p>To determine when to remove old data, use <code>--storage.tsdb.retention</code> option e.g. <code>--storage.tsdb.retention='365d'</code>.</p> <p>To completely remove the data deleted by delete_series send clean_tombstones API call:</p> <pre><code>$ curl -X POST -g 'http://localhost:9090/api/v1/admin/tsdb/clean_tombstones'\n</code></pre> <p> Source </p>","tags":["prometheus","monitoring","observability"]},{"location":"devops/puppet/","title":"Puppet","text":"","tags":["puppet","hiera","r10k"]},{"location":"devops/puppet/#puppetserver","title":"Puppetserver","text":"","tags":["puppet","hiera","r10k"]},{"location":"devops/puppet/#sign-client-certificate","title":"Sign client certificate","text":"<pre><code>$ puppetserver ca sign --certname &lt;fqdn&gt;\n</code></pre>","tags":["puppet","hiera","r10k"]},{"location":"devops/puppet/#list-all-signed-client-certificates","title":"List all signed client certificates","text":"<pre><code>$ puppetserver ca list --all\nRequested Certificates:\n    &lt;fqdn&gt;       (SHA256)  03:C3:0C:A8:CF:35:7A:AC:C0:EE:48:55:9E:C7:03:8F:3D:09:4C:90:84:38:04:B8:C2:BE:E8:94:A1:01:20:29\nSigned Certificates:\n    &lt;fqdn&gt;       (SHA256)  EA:4D:98:9B:F6:00:EF:CA:6C:45:50:97:93:CD:1D:C5:02:C8:F7:88:D0:6C:3E:5B:3B:D3:50:69:99:71:58:C0\n    &lt;fqdn&gt;       (SHA256)  FF:6F:7A:9F:79:01:30:B8:EF:77:20:36:E7:3A:FA:A3:21:D7:8B:10:93:52:0E:CA:6E:8B:4B:0C:07:55:4A:96  alt names: [\"DNS:&lt;fqdn&gt; \", \"DNS:puppet\", \"DNS:puppet.example.com\"]\n    &lt;fqdn&gt;       (SHA256)  E6:42:CE:F5:BC:58:E1:4C:54:B9:75:D4:E5:5D:D6:C8:08:72:E3:EC:92:0A:EC:0D:FC:39:EA:6E:C9:13:80:BD\n    &lt;fqdn&gt;       (SHA256)  27:0E:59:A4:D6:A2:95:A3:3E:27:36:55:66:CE:9B:7F:5C:AE:75:77:91:74:78:AD:50:17:5D:21:19:EE:94:8D\n    &lt;fqdn&gt;       (SHA256)  59:67:BC:65:57:76:A8:DA:B7:0D:D4:96:62:1D:62:DE:E0:A5:1E:0D:42:60:8F:CF:F7:57:1D:76:7E:B9:B1:4E\n    &lt;fqdn&gt;       (SHA256)  3A:CD:99:F8:9A:A6:9A:E5:50:60:AD:8B:76:42:FB:8A:CF:E7:02:85:EA:62:74:FA:C6:6F:F3:CD:88:CE:3B:B3\n</code></pre>","tags":["puppet","hiera","r10k"]},{"location":"devops/puppet/#hiera","title":"Hiera","text":"","tags":["puppet","hiera","r10k"]},{"location":"devops/puppet/#lookup-data","title":"Lookup data","text":"<pre><code>$ hiera -c /etc/puppetlabs/puppet/hiera.yaml bind::zones environment=production ::fqdn=&lt;fqdn&gt; -d\nDEBUG: 2021-05-11 02:55:57 +0200: Hiera YAML backend starting\nDEBUG: 2021-05-11 02:55:57 +0200: Looking up bind::zones in YAML backend\nDEBUG: 2021-05-11 02:55:57 +0200: Looking for data source nodes/&lt;fqdn&gt;\nDEBUG: 2021-05-11 02:55:57 +0200: Found bind::zones in nodes/&lt;fqdn&gt;\n{\"example.com\"=&gt;\n  {\"content\"=&gt;[\"type master\", \"file \\\"/etc/bind/zones/example.com.\\\"\"]},\n \"another_example.com\"=&gt;\n  {\"content\"=&gt;[\"type master\", \"file \\\"/etc/bind/zones/another_example.com.\\\"\"]}}\n</code></pre>","tags":["puppet","hiera","r10k"]},{"location":"guides/entware_rutorrent/","title":"rTorrent/ruTorrent with Nginx & PHP-FPM on Entware","text":"<p>Note</p> <p>Some assumptions: - SSH access to device - Entware installed - Neither rTorrent/ruTorrent, nor Nginx nor PHP-FPM previously installed  </p>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#install-required-base-packages","title":"Install required base packages","text":"<pre><code>$ opkg install bash curl ffmpeg git git-http gzip htop iotop mediainfo mktorrent\\\nnano nginx-ssl php8 php8-cli php8-fpm php8-mod-bcmath php8-mod-ctype\\\nphp8-mod-curl php8-mod-filter php8-mod-opcache php8-mod-phar php8-mod-session\\\nphp8-mod-xml procps-ng-pgrep python3 python3-pip rtorrent-rpc socat unrar\\\nunzip wget-ssl\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#configure-rtorrent","title":"Configure rTorrent","text":"<p>Create necessary directories:</p> <pre><code>$ mkdir --parents /share/data/{.rtorrent,torrents}\n$ mkdir /share/data/.rtorrent/{.session,watch}\n</code></pre> <p>Create rTorrent configuration file:</p> <pre><code>$ nano /share/data/.rtorrent/.rtorrent.rc\n## Run rtorrent as a daemon (disables user interface, only XMLRPC control)\nsystem.daemon.set = true\n\n## Control rtorrent via UNIX XMLRPC socket\nnetwork.scgi.open_local = (cat, \"/opt/var/run/rtorrent.sock\")\nexecute.nothrow = chmod, 770, (cat, \"/opt/var/run/rtorrent.sock\")\n\n## Listening port for incoming peer traffic, don't randomize\nnetwork.port_random.set = no\nnetwork.port_range.set = 49879-49879\n\n## Set default data save directory, session file path\ndirectory.default.set = /share/data/torrents\nsession.path.set = /share/data/.rtorrent/.session\n\n## Disable UDP protocol to trackers, disable DHT/PEX BitTorrent protocols and enable traffic encryption if possible\ntrackers.use_udp.set = no\ndht.mode.set = off\nprotocol.pex.set = no\nprotocol.encryption.set = allow_incoming, try_outgoing, enable_retry\n\n## Preferred filename encoding\nencoding.add = UTF-8\n\n## Disable hash check on torrents that have finished downloading (intensive process)\npieces.hash.on_completion.set = no\n\n## Minimum and maximum number of peers to connect to per torrent while downloading.\nthrottle.min_peers.normal.set = 32\nthrottle.max_peers.normal.set = 64\n\n## Minimum and maximum number of peers to connect to per torrent while seeding. (-1 for same value as above)\nthrottle.min_peers.seed.set = -1\nthrottle.max_peers.seed.set = -1\n\n## Maximum number of simultaneous downloads and uploads slots per torrent\nthrottle.max_downloads.set = 32\nthrottle.max_uploads.set = 32\n\n## Memory address space to map file chunks.\npieces.memory.max.set = 2048M\n\n## Watch directory, saving a torrent file to this directory will automatically start the download.\nschedule2 = watch_directory, 5, 5, load.start=/share/data/.rtorrent/watch/*.torrent\nschedule2 = untied_directory, 5, 5, stop_untied=/share/data/.rtorrent/watch/*.torrent\n\n## Stop rtorrent from downloading data when disk space is low.\nschedule2 = low_diskspace, 15, 60, ((close_low_diskspace, 50G))\n\n## Save rtorrent session data every 5 minutes (default: 20min)\nschedule2 = session_save, 300, 300, ((session.save))\n\n## Initialize ruTorrent plugins\nexecute2 = {sh,-c,/opt/bin/php-cli /opt/var/www/rutorrent/php/initplugins.php &amp;}\n\n## Logging:\n## levels = critical error warn notice info debug\n## groups = connection_* dht_* peer_* rpc_* storage_* thread_* tracker_* torrent_\n# Log info\n# log.open_file = \"logfile\", (cat,/opt/var/log/rtorrent.log)\n# log.add_output = \"debug\", \"logfile\"\n# log.add_output = \"tracker_debug\", \"logfile\"\n</code></pre> <p>Create rTorrent init file:</p> <p>Note</p> <p>This init file is heavily inspired by Entware's <code>/opt/etc/init.d/rc.func</code>.</p> <pre><code>$ nano /opt/etc/init.d/S85rtorrent\n#!/bin/sh\n\nPROCS=rtorrent\nARGS=\"-D -n -o import=/share/data/.rtorrent/.rtorrent.rc\"\nDESC=$PROCS\nPATH=/opt/sbin:/opt/bin:/opt/usr/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n\nansi_red=\"\\033[1;31m\";\nansi_white=\"\\033[1;37m\";\nansi_green=\"\\033[1;32m\";\nansi_yellow=\"\\033[1;33m\";\nansi_blue=\"\\033[1;34m\";\nansi_bell=\"\\007\";\nansi_blink=\"\\033[5m\";\nansi_std=\"\\033[m\";\nansi_rev=\"\\033[7m\";\nansi_ul=\"\\033[4m\";\n\nACTION=$1\n\nstart() {\n    echo -e -n \"$ansi_white Starting $DESC... $ansi_std\"\n    if [ -n \"$(pgrep -x -f \"$PROC $ARGS\")\" ]; then\n        echo -e \"            $ansi_yellow already running. $ansi_std\"\n        return 0\n    fi\n    $PROC $ARGS &gt; /dev/null 2&gt;&amp;1 &amp;\n    COUNTER=0\n    LIMIT=10\n    while [ -z \"$(pgrep -x -f \"$PROC $ARGS\")\" -a \"$COUNTER\" -le \"$LIMIT\" ]; do\n        sleep 1;\n        COUNTER=$((COUNTER + 1))\n    done\n\n    if [ -z \"$(pgrep -x -f \"$PROC $ARGS\")\" ]; then\n        echo -e \"            $ansi_red failed. $ansi_std\"\n        logger \"Failed to start $DESC from $CALLER.\"\n        return 255\n    else\n        echo -e \"            $ansi_green done. $ansi_std\"\n        logger \"Started $DESC from $CALLER.\"\n        return 0\n    fi\n}\n\nstop() {\n    case \"$ACTION\" in\n        stop | restart)\n            echo -e -n \"$ansi_white Shutting down $PROC... $ansi_std\"\n            kill \"$(pgrep -x -f \"$PROC $ARGS\")\" 2&gt;/dev/null\n            COUNTER=0\n            LIMIT=10\n            while [ -n \"$(pgrep -x -f \"$PROC $ARGS\")\" -a \"$COUNTER\" -le \"$LIMIT\" ]; do\n                sleep 1;\n                COUNTER=$((COUNTER + 1))\n            done\n            rm /opt/var/run/rtorrent.sock\n            ;;\n        kill)\n            echo -e -n \"$ansi_white Killing $PROC... $ansi_std\"\n            kill -9 \"$(pgrep -x -f \"$PROC $ARGS\")\" 2&gt;/dev/null\n            rm /opt/var/run/rtorrent.sock\n            ;;\n    esac\n\n    if [ -n \"$(pgrep -x -f \"$PROC $ARGS\")\" ]; then\n        echo -e \"       $ansi_red failed. $ansi_std\"\n        return 255\n    else\n        echo -e \"       $ansi_green done. $ansi_std\"\n        return 0\n    fi\n}\n\ncheck() {\n    echo -e -n \"$ansi_white Checking $DESC... \"\n    if [ -n \"$(pgrep -x -f \"$PROC $ARGS\")\" ]; then\n        echo -e \"            $ansi_green alive. $ansi_std\";\n        return 0\n    else\n        echo -e \"            $ansi_red dead. $ansi_std\";\n        return 1\n    fi\n}\n\nfor PROC in $PROCS; do\n    case $ACTION in\n        start)\n            start\n            ;;\n        stop | kill )\n            check &amp;&amp; stop\n            ;;\n        restart)\n            check &gt; /dev/null &amp;&amp; stop\n            start\n            ;;\n        check)\n            check\n            ;;\n        *)\n            echo -e \"$ansi_white Usage: $0 (start|stop|restart|check)$ansi_std\"\n            exit 1\n            ;;\n    esac\ndone\n</code></pre> <p>Then run:</p> <pre><code>$ chmod +x /opt/etc/init.d/S85rtorrent\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#install-and-configure-rutorrent","title":"Install and configure ruTorrent","text":"<pre><code>$ mkdir /opt/var/www\n$ git clone https://github.com/Novik/ruTorrent.git /opt/var/www/rutorrent\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#create-rutorrent-user-config","title":"Create ruTorrent 'user' config","text":"<p>We're not creating any ruTorrent users so we'll edit the default <code>config.php</code> file.</p> <pre><code>$ nano /opt/var/www/rutorrent/conf/config.php\n</code></pre> <p>Add the following:</p> <pre><code>&lt;?php\n        // configuration parameters\n\n        // for snoopy client\n        $httpUserAgent = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36';\n        $httpTimeOut = 30;                      // in seconds\n        $httpUseGzip = true;\n        $httpIP = null;                         // IP string. Or null for any.\n        $httpProxy = array\n        (\n                'use'   =&gt; false,\n                'proto' =&gt; 'http',              // 'http' or 'https'\n                'host'  =&gt; 'PROXY_HOST_HERE',\n                'port'  =&gt; 3128\n        );\n\n        // for xmlrpc actions\n        $rpcTimeOut = 5;                        // in seconds\n        $rpcLogCalls = false;\n        $rpcLogFaults = true;\n\n        // for php\n        $phpUseGzip = false;\n        $phpGzipLevel = 2;\n\n        $schedule_rand = 10;                    // rand for schedulers start, +0..X seconds\n\n        $do_diagnostic = true;                  // Diagnose ruTorrent. Recommended to keep enabled, unless otherwise required.\n        $al_diagnostic = true;                  // Diagnose auto-loader. Set to \"false\" to make composer plugins work.\n\n        $log_file = '/opt/var/log/rutorrent/errors.log';                // path to log file (comment or leave blank to disable logging)\n\n        $saveUploadedTorrents = true;           // Save uploaded torrents to profile/torrents directory or not\n        $overwriteUploadedTorrents = false;     // Overwrite existing uploaded torrents in profile/torrents directory or make unique name\n\n        $topDirectory = '/share/data/torrents/';                        // Upper available directory. Absolute path with trail slash.\n        $forbidUserSettings = false;\n\n        // $scgi_port = 5000;\n        // $scgi_host = \"127.0.0.1\";\n\n        // For web-&gt;rtorrent link through unix domain socket\n        // (scgi_local in rtorrent conf file), change variables\n        // above to something like this:\n        //\n\n        $scgi_port = 0;\n        $scgi_host = \"unix:///opt/var/run/rtorrent.sock\";\n\n        $XMLRPCMountPoint = \"/RPC2\";            // DO NOT DELETE THIS LINE!!! DO NOT COMMENT THIS LINE!!!\n\n        $throttleMaxSpeed = 327625*1024;        // DO NOT EDIT THIS LINE!!! DO NOT COMMENT THIS LINE!!!\n        // Can't be greater then 327625*1024 due to limitation in libtorrent ResourceManager::set_max_upload_unchoked function.\n\n        $pathToExternals = array(\n                \"curl\"   =&gt; '/opt/bin/curl',\n                \"gzip\"   =&gt; '/opt/bin/gzip',\n                \"id\"     =&gt; '/usr/bin/id',\n                \"php\"    =&gt; '/opt/bin/php-cli',\n                \"pgrep\"  =&gt; '/opt/bin/pgrep',\n                \"python\" =&gt; '/opt/bin/python3',\n                \"stat\"   =&gt; '/opt/bin/stat'\n        );\n\n        $localHostedMode = true;                // Set to true if rTorrent is hosted on the SAME machine as ruTorrent\n\n        $cachedPluginLoading = true;            // Set to true to enable rapid cached loading of ruTorrent plugins\n                                                // Required to clear web browser cache when upgrading versions\n\n        $localhosts = array(                    // list of local interfaces\n                \"127.0.0.1\",\n                \"localhost\",\n        );\n\n        $profilePath = '../../share';           // Path to user profiles\n        $profileMask = 0777;                    // Mask for files and directory creation in user profiles.\n                                                // Both Webserver and rtorrent users must have read-write access to it.\n                                                // For example, if Webserver and rtorrent users are in the same group then the value may be 0770.\n\n        $tempDirectory = null;                  // Temp directory. Absolute path with trail slash. If null, then autodetect will be used.\n\n        $canUseXSendFile = false;               // If true then use X-Sendfile feature if it exist\n\n        $locale = \"UTF8\";\n\n        $enableCSRFCheck = false;               // If true then Origin and Referer will be checked\n        $enabledOrigins = array();              // List of enabled domains for CSRF check (only hostnames, without protocols, port etc.).\n                                                // If empty, then will retrieve domain from HTTP_HOST / HTTP_X_FORWARDED_HOST\n</code></pre> <p>Configure ruTorrent plugins follows:</p> <pre><code>$ nano /opt/var/www/rutorrent/conf/plugins.ini\n;; Plugins' permissions.\n;; If flag is not found in plugin section, corresponding flag from \"default\" section is used.\n;; If flag is not found in \"default\" section, it is assumed to be \"yes\".\n;;\n;; For setting individual plugin permissions you must write something like that:\n;;\n;; [ratio]\n;; enabled = yes                        ;; also may be \"user-defined\", in this case user can control plugin's state from UI\n;; canChangeToolbar = yes\n;; canChangeMenu = yes\n;; canChangeOptions = no\n;; canChangeTabs = yes\n;; canChangeColumns = yes\n;; canChangeStatusBar = yes\n;; canChangeCategory = yes\n;; canBeShutdowned = yes\n\n[default]\nenabled = user-defined\ncanChangeToolbar = yes\ncanChangeMenu = yes\ncanChangeOptions = yes\ncanChangeTabs = yes\ncanChangeColumns = yes\ncanChangeStatusBar = yes\ncanChangeCategory = yes\ncanBeShutdowned = yes\n\n[ipad]\nenabled = no\n\n[httprpc]\nenabled = no\n\n[retrackers]\nenabled = no\n\n[rpc]\nenabled = no\n\n[rutracker_check]\nenabled = no\n\n[geoip]\nenabled = no\n\n[geoip2]\nenabled = yes\n\n[spectrogram]\nenabled = no\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#configure-create-plugin","title":"Configure <code>create</code> plugin","text":"<pre><code>$ nano /opt/var/www/rutorrent/plugins/create/conf.php\n$useExternal = 'mktorrent';\n$pathToCreatetorrent = '/opt/bin/mktorrent';\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#install-cloudscraper-plugin","title":"Install <code>cloudscraper</code> plugin","text":"<p><code>cloudscraper</code> is a dependency of the <code>_cloudflare</code> plugin.</p> <pre><code>$ pip3 install cloudscraper\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#install-ratiocolor-plugin","title":"Install <code>ratiocolor</code> plugin","text":"<pre><code>$ cd /opt/var/www/rutorrent/plugins\n$ git clone git@github.com:Micdu70/rutorrent-ratiocolor.git ratiocolor\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#install-geoip2-plugin","title":"Install <code>geoip2</code> plugin","text":"<pre><code>$ cd /opt/var/www/rutorrent/plugins\n$ git clone git@github.com:Micdu70/geoip2-rutorrent.git geoip2\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#install-nfo-plugin","title":"Install <code>nfo</code> plugin","text":"<pre><code>$ cd /opt/var/www/rutorrent/plugins\n$ git clone git@github.com:phracker/ruTorrent-nfo.git nfo\n</code></pre> <p>Hint</p> <p>You might need to \"fix\" <code>tracklabels</code> missing icons as described here.</p>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#configure-phpphp-fpm","title":"Configure PHP/PHP-FPM","text":"<p>For PHP:</p> <pre><code>$ nano /opt/etc/php.ini\nmemory_limit = 128M\n;doc_root = \"/opt/share/www\"\nupload_max_filesize = 64M\nmax_file_uploads = 64\ndate.timezone = \"Europe/Luxembourg\"\nsys_temp_dir = \"/opt/tmp\"\n</code></pre> <p>For PHP-FPM:</p> <pre><code>$ nano /opt/etc/php8-fpm.d/www.conf\nuser = admin\nenv[PATH] = /opt/bin:/opt/sbin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/bin/X11:/usr/local/sbin:/usr/local/bin\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#allow-php-fpm-to-run-as-root","title":"Allow PHP-FPM to run as root","text":"<pre><code>$ nano /opt/etc/init.d/S79php8-fpm\nARGS=\"--daemonize -R --fpm-config /opt/etc/php8-fpm.conf\"\n</code></pre> <p>Note</p> <p>You'll need to edit the init file to allow <code>php-fpm</code> to run as root each time the package is updated.</p>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#configure-nginx","title":"Configure Nginx","text":"<pre><code>$ nano /opt/etc/nginx/nginx.conf\nuser admin administrators;\nworker_processes auto;\npid /opt/var/run/nginx.pid;\ninclude /opt/etc/nginx/modules-enabled/*.conf;\n\nevents {\n    worker_connections 1024;\n    use epoll;\n    # multi_accept on;\n}\n\nhttp {\n\n    ##\n    # Basic Settings\n    ##\n\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay off;\n    keepalive_timeout 65;\n    keepalive_requests 100;\n    keepalive_disable msie6;\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    # server_names_hash_bucket_size 64;\n    # server_name_in_redirect off;\n\n    include /opt/etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    ##\n    # SSL Settings\n    ##\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\n    ssl_prefer_server_ciphers on;\n\n    ##\n    # Logging Settings\n    ##\n\n    access_log /opt/var/log/nginx/access.log;\n    error_log /opt/var/log/nginx/error.log;\n\n    ##\n    # Gzip Settings\n    ##\n\n    gzip on;\n    gzip_disable \"msie6\";\n    gzip_min_length 512;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_buffers 16 8k;\n    gzip_types\n        text/css\n        text/javascript\n        text/xml\n        text/plain\n        text/x-component\n        application/javascript\n        application/x-javascript\n        application/json\n        application/xml\n        application/rss+xml\n        application/vnd.ms-fontobject\n        font/truetype\n        font/opentype\n        image/svg+xml;\n\n    ##\n    # Virtual Host Configs\n    ##\n\n    include /opt/etc/nginx/conf.d/*.conf;\n    include /opt/etc/nginx/sites-enabled/*;\n}\n</code></pre> <p>Create the proper Nginx symlink</p> <pre><code>$ ln -s /opt/etc/nginx/sites-available/rutorrent.example.com.conf /opt/etc/nginx/sites-enabled/rutorrent.example.com.conf\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#configure-nginx-scgi","title":"Configure Nginx SCGI","text":"<pre><code>$ nano /opt/etc/nginx/scgi_params\nscgi_param  REQUEST_METHOD     $request_method;\nscgi_param  REQUEST_URI        $request_uri;\nscgi_param  QUERY_STRING       $query_string;\nscgi_param  CONTENT_TYPE       $content_type;\n\nscgi_param  DOCUMENT_URI       $document_uri;\nscgi_param  DOCUMENT_ROOT      $document_root;\nscgi_param  SCGI               1;\nscgi_param  SERVER_PROTOCOL    $server_protocol;\nscgi_param  REQUEST_SCHEME     $scheme;\nscgi_param  HTTPS              $https if_not_empty;\n\nscgi_param  REMOTE_ADDR        $remote_addr;\nscgi_param  REMOTE_PORT        $remote_port;\nscgi_param  SERVER_PORT        $server_port;\nscgi_param  SERVER_NAME        $server_name;\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#create-nginx-vhost","title":"Create Nginx vhost","text":"<pre><code>$ mkdir --parent /opt/etc/nginx/{sites-available,sites-enabled}\n$ nano /opt/etc/nginx/sites-available/rutorrent.example.com.conf\nserver {\n    listen 80;\n    server_name rutorrent.example.com;\n    return 301 https://$server_name$request_uri;\n\n    access_log /opt/var/log/nginx/example.com/rutorrent/access.log;\n    error_log /opt/var/log/nginx/example.com/rutorrent/error.log;\n}\n\nserver {\n    listen 443 ssl;\n    http2 on;\n    server_name rutorrent.example.com;\n\n    access_log /opt/var/log/nginx/example.com/rutorrent/access.log;\n    error_log /opt/var/log/nginx/example.com/rutorrent/error.log;\n\n    ssl_certificate /opt/etc/acme.sh/rutorrent.example.com_ecc/fullchain.cer;\n    ssl_certificate_key /opt/etc/acme.sh/rutorrent.example.com_ecc/rutorrent.example.com.key;\n    ssl_dhparam /opt/etc/acme.sh/rutorrent.example.com_ecc/dhparam.pem;\n    ssl_session_timeout 5m;\n    ssl_prefer_server_ciphers on;\n    ssl_session_tickets off;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    add_header Strict-Transport-Security \"max-age=15768000\" always; # six month\n\n    charset utf-8;\n    index index.html index.php;\n    root /opt/var/www/rutorrent;\n\n    client_max_body_size 64M;\n\n    error_page 500 502 503 504 /50x.html;\n\n    location /RPC2 {\n        include scgi_params;\n        scgi_pass unix:/opt/var/run/rtorrent.sock;\n    }\n\n    location = /50x.html {\n        root /opt/share/nginx/html;\n    }\n\n    location = /favicon.ico {\n        access_log off;\n        log_not_found off;\n    }\n\n    location ~ ^/(conf|share)/(.+)$ {\n        deny all;\n    }\n\n    location ~ \\.php$ {\n        try_files $uri =404;\n        fastcgi_split_path_info ^(.+\\.php)(/.*)$;\n        include fastcgi_params;\n        fastcgi_index  index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param PATH_INFO $fastcgi_path_info;\n        fastcgi_param HTTPS on;\n        # Avoid sending the security headers twice\n        fastcgi_param modHeadersAvailable true;\n        fastcgi_param front_controller_active true;\n        fastcgi_pass unix:/opt/var/run/php8-fpm.sock;\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off;\n    }\n\n    location ~* \\.(jpg|jpeg|gif|css|png|js|map|woff|woff2|ttf|svg|eot)$ {\n        expires 30d;\n        access_log off;\n    }\n}\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#generate-tls-certificates-for-vhost","title":"Generate TLS certificates for vhost","text":"<p>Install acme.sh:</p> <pre><code>$ cd /tmp\n$ git clone https://github.com/acmesh-official/acme.sh.git\n$ cd acme.sh/\n$ ./acme.sh --install --nocron --home /opt/etc/acme.sh --accountemail \"user@example.com\"\n</code></pre> <p>Configure your DNS provider API keys:</p> <pre><code>$ nano /opt/etc/acme.sh/dnsapi/dns_cf.sh\n#!/opt/bin/bash\n\n#\n#CF_Key=\"sdfsdfsdfljlbjkljlkjsdfoiwje\"\n#\n#CF_Email=\"xxxx@sss.com\"\n\nCF_Token=\"foo\"\nCF_Account_ID=\"bar\"\nCF_Zone_ID=\"foobar\"\n\nCF_Api=\"https://api.cloudflare.com/client/v4\"\n</code></pre> <p>Generate TLS certificate:</p> <pre><code>$ /opt/etc/acme.sh/acme.sh --home /opt/etc/acme.sh --server letsencrypt --issue -d example.com --dns dns_cf\n</code></pre> <p>Setup a cronjob to automatically renew your certificate:</p> <pre><code>$ crontab -e\n30 3 * * 0 \"/opt/etc/acme.sh/acme.sh\" --cron --home \"/opt/etc/acme.sh\" &gt; /dev/null\n</code></pre> <p>Setup a Diffie-Helmann key as follows:</p> <pre><code>$ wget https://ssl-config.mozilla.org/ffdhe4096.txt -O /opt/etc/acme.sh/rutorrent.example.com_ecc/dhparam.pem\n</code></pre>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"guides/entware_rutorrent/#restart-services","title":"Restart services","text":"<pre><code>$ /opt/etc/init.d/S79php8-fpm restart\n$ /opt/etc/init.d/S80nginx restart\n$ /opt/etc/init.d/S85rtorrent start\n</code></pre> <p>Hint</p> <p>Nginx might error out with the following message:</p> <pre><code>nginx: [error] open() \"/opt/var/run/nginx.pid\" failed (2: No such file or directory)\n</code></pre> <p>To fix it, simply run the following command:</p> <pre><code>$ nginx -c /opt/etc/nginx/nginx.conf\n</code></pre> <p>You should now be all set! </p>","tags":["Entware","rTorrent'","rutorrent","nginx","php"]},{"location":"hardware/MIR3G/","title":"Xiaomi Mi WiFi R3G","text":"","tags":["Xiaomi","router"]},{"location":"hardware/MIR3G/#specifications","title":"Specifications","text":"","tags":["Xiaomi","router"]},{"location":"hardware/MIR3G/#linux-kernel","title":"Linux kernel","text":"<p>Running <code>Padavan 3.4.3.9L-101_3dbb564</code>.</p> <pre><code>$ uname -a\nLinux ap1 3.4.113 #1 SMP Sat May 15 10:43:11 +07 2021 mips GNU/Linux\n</code></pre> Older versions <p>Running <code>Padavan 3.4.3.9L-101_e662678</code>.</p>","tags":["Xiaomi","router"]},{"location":"hardware/MIR3G/#cpu-information","title":"CPU information","text":"<pre><code>$ sed '/^$/d' &lt; /proc/cpuinfo | grep -m 1 'system type' | cut -c16-\nMediaTek MT7621 SoC\n</code></pre> Full output <pre><code>$ cat /proc/cpuinfo\nsystem type             : MediaTek MT7621 SoC\nprocessor               : 0\ncpu model               : MIPS 1004Kc V2.15\nBogoMIPS                : 583.68\nwait instruction        : yes\nmicrosecond timers      : yes\ntlb_entries             : 32\nextra interrupt vector  : yes\nhardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0000, 0x0000, 0x0000]\nASEs implemented        : mips16 dsp mt\nshadow register sets    : 1\nkscratch registers      : 0\ncore                    : 0\nVPE                     : 0\nVCED exceptions         : not available\nVCEI exceptions         : not available\n\nprocessor               : 1\ncpu model               : MIPS 1004Kc V2.15\nBogoMIPS                : 583.68\nwait instruction        : yes\nmicrosecond timers      : yes\ntlb_entries             : 32\nextra interrupt vector  : yes\nhardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0000, 0x0000, 0x0000]\nASEs implemented        : mips16 dsp mt\nshadow register sets    : 1\nkscratch registers      : 0\ncore                    : 0\nVPE                     : 1\nVCED exceptions         : not available\nVCEI exceptions         : not available\n\nprocessor               : 2\ncpu model               : MIPS 1004Kc V2.15\nBogoMIPS                : 583.68\nwait instruction        : yes\nmicrosecond timers      : yes\ntlb_entries             : 32\nextra interrupt vector  : yes\nhardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0ff8, 0x0000, 0x0000]\nASEs implemented        : mips16 dsp mt\nshadow register sets    : 1\nkscratch registers      : 0\ncore                    : 1\nVPE                     : 0\nVCED exceptions         : not available\nVCEI exceptions         : not available\n\nprocessor               : 3\ncpu model               : MIPS 1004Kc V2.15\nBogoMIPS                : 583.68\nwait instruction        : yes\nmicrosecond timers      : yes\ntlb_entries             : 32\nextra interrupt vector  : yes\nhardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0000, 0x0000, 0x0000]\nASEs implemented        : mips16 dsp mt\nshadow register sets    : 1\nkscratch registers      : 0\ncore                    : 1\nVPE                     : 1\nVCED exceptions         : not available\nVCEI exceptions         : not available\n</code></pre>","tags":["Xiaomi","router"]},{"location":"hardware/MIR3G/#mediatek-mt7621-soc","title":"MediaTek MT7621 SoC","text":"<ul> <li>Product Page</li> </ul>","tags":["Xiaomi","router"]},{"location":"hardware/MIR3G/#memory-information","title":"Memory information","text":"<pre><code>$ cat /proc/meminfo\nMemTotal:         256088 kB\nMemFree:          223560 kB\nBuffers:            3276 kB\nCached:             8420 kB\nSwapCached:            0 kB\nActive:             5796 kB\nInactive:           7860 kB\nActive(anon):       2120 kB\nInactive(anon):      156 kB\nActive(file):       3676 kB\nInactive(file):     7704 kB\nUnevictable:           0 kB\nMlocked:               0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\nDirty:                 0 kB\nWriteback:             0 kB\nAnonPages:          1992 kB\nMapped:             2424 kB\nShmem:               304 kB\nSlab:               9804 kB\nSReclaimable:       1248 kB\nSUnreclaim:         8556 kB\nKernelStack:         400 kB\nPageTables:          224 kB\nNFS_Unstable:          0 kB\nBounce:                0 kB\nWritebackTmp:          0 kB\nCommitLimit:      128044 kB\nCommitted_AS:       5472 kB\nVmallocTotal:    1048372 kB\nVmallocUsed:        5084 kB\nVmallocChunk:    1041136 kB\n</code></pre>","tags":["Xiaomi","router"]},{"location":"hardware/RB4011/","title":"Mikrotik RB4011iGS+RM","text":"<p><code>TODO</code></p>","tags":["Mikrotik","router"]},{"location":"hardware/TS873A/","title":"QNAP TS-873A","text":"<p>QNAP TS-873A, supremely versatile business NAS.</p>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#specifications","title":"Specifications","text":"","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#linux-kernel","title":"Linux kernel","text":"<p>Running <code>QuTS Hero 5.2.0.2737 (beta)</code>.</p> <pre><code>[~] # uname -a\nLinux QNAP 5.10.60-qnap #1 SMP Wed Apr 17 09:40:49 CST 2024 x86_64 GNU/Linux\n</code></pre> Older QuTS versions <p>Running <code>QuTS Hero 5.0.0.1772</code>.</p> <pre><code>[~] # uname -a\nLinux QNAP 5.10.55-qnap #1 SMP Thu Aug 26 11:38:38 CST 2021 x86_64 GNU/Linux\n</code></pre> <p>Running <code>QuTS Hero 4.5.3.1698</code>.</p> <pre><code>[~] # uname -a\nLinux QNAP 4.14.24-qnap #1 SMP Sat Jun 12 07:59:04 CST 2021 x86_64 GNU/Linux\n</code></pre>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#cpu-information","title":"CPU information","text":"<pre><code>[~] # sed '/^$/d' &lt; /proc/cpuinfo | grep -m 1 'model name' | cut -c14-\nAMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\n</code></pre> Full output <pre><code>[~] # cat /proc/cpuinfo\nprocessor       : 0\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\nstepping        : 0\nmicrocode       : 0x8101016\ncpu MHz         : 1954.227\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 0\ncpu cores       : 4\napicid          : 0\ninitial apicid  : 0\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveopt xsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1\nspectre_v2 spec_store_bypass\nbogomips        : 4391.49\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 1\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\nstepping        : 0\nmicrocode       : 0x8101016\ncpu MHz         : 1955.271\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 0\ncpu cores       : 4\napicid          : 1\ninitial apicid  : 1\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveopt xsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1\nspectre_v2 spec_store_bypass\nbogomips        : 4391.49\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 2\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\nstepping        : 0\nmicrocode       : 0x8101016\ncpu MHz         : 1954.071\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 1\ncpu cores       : 4\napicid          : 2\ninitial apicid  : 2\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveopt xsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1\nspectre_v2 spec_store_bypass\nbogomips        : 4391.49\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 3\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\nstepping        : 0\nmicrocode       : 0x8101016\ncpu MHz         : 1954.425\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 1\ncpu cores       : 4\napicid          : 3\ninitial apicid  : 3\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveopt xsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1\nspectre_v2 spec_store_bypass\nbogomips        : 4391.49\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 4\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\nstepping        : 0\nmicrocode       : 0x8101016\ncpu MHz         : 1954.314\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 2\ncpu cores       : 4\napicid          : 4\ninitial apicid  : 4\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveopt xsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1\nspectre_v2 spec_store_bypass\nbogomips        : 4391.49\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 5\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\nstepping        : 0\nmicrocode       : 0x8101016\ncpu MHz         : 1954.611\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 2\ncpu cores       : 4\napicid          : 5\ninitial apicid  : 5\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveopt xsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1\nspectre_v2 spec_store_bypass\nbogomips        : 4391.49\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 6\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\nstepping        : 0\nmicrocode       : 0x8101016\ncpu MHz         : 1932.097\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 3\ncpu cores       : 4\napicid          : 6\ninitial apicid  : 6\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveopt xsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1\nspectre_v2 spec_store_bypass\nbogomips        : 4391.49\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 7\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen Embedded V1500B Quad-core CPU @ 2.20GHz\nstepping        : 0\nmicrocode       : 0x8101016\ncpu MHz         : 1911.751\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 3\ncpu cores       : 4\napicid          : 7\ninitial apicid  : 7\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveopt xsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1\nspectre_v2 spec_store_bypass\nbogomips        : 4391.49\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n</code></pre>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#amd-ryzentm-embedded-v1500b","title":"AMD Ryzen\u2122 Embedded V1500B","text":"<ul> <li>Product Page</li> </ul>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#memory-information","title":"Memory information","text":"<p>See Memory upgrades</p> <pre><code>[~] # cat /proc/meminfo\nMemTotal:       65824156 kB\nMemFree:        57450896 kB\nMemAvailable:   57395092 kB\nBuffers:           23360 kB\nCached:           904984 kB\nSwapCached:            0 kB\nActive:           789444 kB\nInactive:         569448 kB\nActive(anon):     612776 kB\nInactive(anon):   132268 kB\nActive(file):     176668 kB\nInactive(file):   437180 kB\nUnevictable:       15808 kB\nMlocked:           15808 kB\nSwapTotal:      65850360 kB\nSwapFree:       65850360 kB\nDirty:                 0 kB\nWriteback:             0 kB\nAnonPages:        446304 kB\nMapped:           142464 kB\nShmem:            315568 kB\nSlab:             371116 kB\nSReclaimable:      96004 kB\nSUnreclaim:       275112 kB\nKernelStack:       33636 kB\nPageTables:        35920 kB\nNFS_Unstable:          0 kB\nBounce:                0 kB\nWritebackTmp:          0 kB\nCommitLimit:    98762436 kB\nCommitted_AS:    7178028 kB\nVmallocTotal:   34359738367 kB\nVmallocUsed:           0 kB\nVmallocChunk:          0 kB\nHardwareCorrupted:     0 kB\nHugePages_Total:       0\nHugePages_Free:        0\nHugePages_Rsvd:        0\nHugePages_Surp:        0\nHugepagesize:       2048 kB\nDirectMap4k:      412720 kB\nDirectMap2M:     5830656 kB\nDirectMap1G:    61865984 kB\n</code></pre>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#upgrades","title":"Upgrades","text":"","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#memory","title":"Memory","text":"<p>QNAP's TS-873A comes with 8GB of DDR4-2666 non ECC memory as standard. This is a Kingston product marketed as QNAP RAM under part number <code>RAM-8GDR4T0-SO-2666</code>.</p> <p>Upgraded to 64GB of DDR4-2666 ECC Unbuffered memory from Kingston with part number KSM26SED8/32ME.</p> <ul> <li>Memory Datasheet</li> </ul>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#system-ssd","title":"System SSD","text":"<p>QNAP just like Synology devices have an internal flash memory chip. This is where the default QuTS/QTS/DSM operating system and configuration are stored. Whichever drive (SSD or HDD) that you initially setup your QNAP with will house not only your apps but also QNAP configuration itself, etc...</p> <p>QNAP's TS-873A comes with two M.2 2280 PCIe Gen3 x1 slots that were populated with Samsung 980 500GB SSDs, part number <code>MZ-V8V500BW</code>.</p> <ul> <li>Datasheet</li> </ul>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#video","title":"Video","text":"<p>PNY NVIDIA\u00ae Quadro\u00ae P1000, mainly used for Plex Media Server Hardware-Accelerated Streaming.</p> <ul> <li>Datasheet (NVIDIA)</li> <li>Datasheet (PNY)</li> </ul> <p>After installing the card into the TS-873A, QTS/QuTS should automatically install the required package NVIDIA\u00ae kernel driver package. If the package isn't installed automatically, open the QNAP App Center and install the latest <code>NVIDIA_GPU_DRV</code> (QTS) or <code>NvKernelDriver</code> (QuTS) package. Also install the <code>NVIDIA GPU Driver</code> package.</p> <p>Under <code>Control Panel &gt; Hardware &gt; Hardware Resources</code>, set the installed graphics card to QTS mode.</p>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#force-hw-video-encodingdecoding-in-plex-media-server","title":"Force HW video encoding/decoding in Plex Media Server","text":"<p>In some cases and for seamingly unknown reasons, even when setting the graphics card to <code>QTS mode</code> in the QTS/QuTS interface as explained above, Plex Media Server won't use it for hardware video encoding/decoding.</p> <p>To force Plex to use the installed graphics card, make sure the card is properly detected:</p> <pre><code>[~] # gpuhal_app -l\n1:NVIDIA Corporation:GP107GL [Quadro P1000]:external:7\n</code></pre> <p>Get graphics card information, such as mode and installed drivers:</p> <pre><code>[~] # gpuhal_app -s 1\nactive_status=2,real_status=2,driverqpkg=NVIDIA_GPU_DRV,driver_installed=1,in_used=none,transcode=1,display=1,pcie_slot=1,pcie_vp=1,va_type=none\n</code></pre> <p>Check that the card has a device file and a render node under <code>/dev/dri/</code>:</p> <pre><code>[~] # ls -la /dev/dri/\ntotal 0\ndrwxr-xr-x  2 admin administrators       80 2022-02-18 11:22 ./\ndrwxr-xr-x 17 admin administrators    21380 2022-02-25 13:53 ../\ncrw-------  1 admin administrators 226,   0 2022-02-18 11:22 card0\ncrw-------  1 admin administrators 226, 128 2022-02-18 11:22 renderD128\n</code></pre> <p>Add the following to your <code>Preferences.xml</code> file and restart Plex Media Server.</p> <pre><code>[~] # nano /share/ZFS530_DATA/.qpkg/PlexMediaServer/Library/Plex\\ Media\\ Server/Preferences.xml\n[...] HardwareDevicePath=\"/dev/dri/renderD128\"\n</code></pre> <p>You should now be able to use hardware video encoding/decoding.</p> <p> Source </p>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#potential-additional-upgrades","title":"Potential additional upgrades","text":"","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#pcie","title":"PCIe","text":"<ul> <li>QM2-2P-384 - Dual M.2 22110/2280 PCIe NVMe SSD expansion card</li> <li>QM2-2P10G1TA - Dual M.2 2280 PCIe NVMe SSD &amp; single-port 10GbE expansion card</li> </ul>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#storage-expansion","title":"Storage expansion","text":"<ul> <li>TR-004 - 4 Bay USB Type-C Direct Attached Storage with Hardware RAID</li> </ul>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#configuration","title":"Configuration","text":"","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#persistant-crontab","title":"Persistant crontab","text":"<p>The normal method of editing your crontab does not work on QNAP NAS' as it does not persist after a reboot. To make crontab changes persistant, do the following:</p> <pre><code>[~] # nano /etc/config/crontab\n[~] # crontab /etc/config/crontab\n[~] # /etc/init.d/crond.sh restart\n</code></pre>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#usage","title":"Usage","text":"","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#fix-nvidia-smi-path","title":"Fix <code>nvidia-smi</code> PATH","text":"<p>When trying to invoke the nvidia-smi utility from the command-line, the command fails with the following error:</p> <pre><code>[~] # /share/ZFS530_DATA/.qpkg/NVIDIA_GPU_DRV/usr/bin/nvidia-smi\nNVIDIA-SMI couldn't find libnvidia-ml.so library in your system. Please make sure that the NVIDIA Display Driver is properly installed and present in your system.\nPlease also try adding directory that contains libnvidia-ml.so to your system PATH.\n</code></pre> <p>To fix this, add the necessary directory to your PATH as follows:</p> <pre><code>[~] # export LD_LIBRARY_PATH=\"/share/ZFS530_DATA/.qpkg/NVIDIA_GPU_DRV/usr/nvidia.u18.04$LD_LIBRARY_PATH\"\n[~] # /share/ZFS530_DATA/.qpkg/NVIDIA_GPU_DRV/usr/bin/nvidia-smi\nSun Oct 22 16:53:20 2023\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 515.48.07    Driver Version: 515.48.07    CUDA Version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  Quadro P1000        Off  | 00000000:01:00.0 Off |                  N/A |\n| 41%   39C    P0    N/A /  N/A |    422MiB /  4096MiB |      1%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n</code></pre> LD_LIBRARY_PATH <p>Only <code>/share/ZFS530_DATA/.qpkg/NVIDIA_GPU_DRV/usr/nvidia.u18.04</code> can be added to <code>LD_LIBRARY_PATH</code>.</p> <pre><code>[~] # find / -path /share/ZFS19_DATA/ -prune -o -name \"libnvidia-ml.so\" -print\n/share/ZFS530_DATA/.qpkg/NVIDIA_GPU_DRV/usr/lib/libnvidia-ml.so\n/share/ZFS530_DATA/.qpkg/NVIDIA_GPU_DRV/usr/nvidia/libnvidia-ml.so\n/share/ZFS530_DATA/.qpkg/NVIDIA_GPU_DRV/usr/nvidia.u18.04/libnvidia-ml.so\n/share/ZFS530_DATA/.qpkg/NVIDIA_GPU_DRV/cuda-11.7/targets/x86_64-linux/lib/stubs/libnvidia-ml.so\n[~] #\n</code></pre> <p>Using any other directory listed above allows for <code>nvidia-smi</code> to work as expected but results in PMS failing to start with the following error:</p> <pre><code>[~] # /share/ZFS530_DATA/.qpkg/PlexMediaServer/plex.sh restart\nPlex Media Server hasn't been enabled or started...\nStarting Plex Media Server...\n[~] # Error relocating ./Plex Media Server: drmGetDevices2: symbol not found\n</code></pre> <p>The PATH issue was reported to QNAP on November 23rd 2021 but was discarded with the following reply:</p> <p>The [NVIDIA GPU Driver] qpkg is used for NAS web UI to display NVidia GPU card status, so it can be assigned to HD Station, Linux Station, or Hardware Transcoding. This qpkg doesn't provide the library path in the environment by default.</p>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/TS873A/#update-samsung-ssd-firmware","title":"Update Samsung SSD Firmware","text":"<p>https://blog.quindorian.org/2021/05/firmware-update-samsung-ssd-in-linux.html/</p> <pre><code>[~] # wget https://download.semiconductor.samsung.com/resources/software-resources/Samsung_SSD_980_3B4QFXO7.iso\n[~] # mkdir /mnt/iso\n[~] # mount -o loop ./Samsung_SSD_980_3B4QFXO7.iso /mnt/iso/\n[~] # mkdir /tmp/fwupdate\n[~] # cd /tmp/fwupdate\n[~] # gzip -dc /mnt/iso/initrd | cpio -idv\n[~] # cd root/fumagician/\n[~] # ./fumagician\n</code></pre>","tags":["qnap","TS-873A","Network Attached Storage","NAS"]},{"location":"hardware/helios64/","title":"Helios64","text":"<p>The Helios64 is a powerful ARM board specially designed for Network Attached Storage (NAS). It harnesses its processing capabilities from the Rockchip RK3399 SoC.</p>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#debugging","title":"Debugging","text":"","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#increase-serial-console-verbosity","title":"Increase serial console verbosity","text":"","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#boot-from-microsd-card","title":"Boot from microSD card","text":"<p>Add the following lines to <code>/boot/armbianEnv.txt</code></p> <pre><code>verbosity=7\nconsole=serial\nextraargs=earlyprintk ignore_loglevel\n</code></pre>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#boot-from-emmc","title":"Boot from eMMC","text":"<p>Boot from a fresh image on a microSD card, mount the eMMC then modify <code>/boot/armbianEnv.txt</code>.</p>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#log-serial-console-output-to-file","title":"Log serial console output to file","text":"<pre><code>$ screen -S helios64-serial\n$ picocom -b 1500000 /dev/ttyUSB0 -g &lt;filename&gt;.txt\n</code></pre>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#audit-armbianenvtxt","title":"Audit ArmbianEnv.txt","text":"<p>For some unknown reason <code>/boot/armbianEnv.txt</code> keeps getting overwritten with logrotate configuration \"gibberish\". To monitor which process is modifying the file, setup <code>autitd</code> as follows:</p> <pre><code>$ sudo apt-get install auditd\n$ sudo auditctl -w /boot/armbianEnv.txt -p wa\n$ sudo tail -F /var/log/audit/audit.log\n</code></pre>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#management","title":"Management","text":"","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#start-fans-during-early-boot","title":"Start fans during early boot","text":"<p>Allow the fans to spin at a constant speed from the earliest stage of initrd until fancontrol is started by the system. If the boot process encounters an error, the fans may never start and your device will overheat.</p> <p>Include the pwm-fan module to initramfs like so:</p> <pre><code>$ echo pwm-fan | sudo tee -a /etc/initramfs-tools/modules\n</code></pre> <p>Create <code>/etc/initramfs-tools/scripts/init-top/fan</code>:</p> <pre><code>#!/bin/sh\n\nPREREQ=\"\"\nprereqs() {\n        echo \"$PREREQ\"\n}\n\ncase $1 in\nprereqs)\n        prereqs\n        exit 0\n        ;;\nesac\n\n. /scripts/functions\n\nmodprobe pwm-fan\n\nfor pwm in /sys/devices/platform/p*-fan/hwmon/hwmon*/pwm1; do\n        echo 150 &gt;$pwm\ndone\n\nexit 0\n</code></pre> <p>The <code>$pwm</code> value can be set anywhere between 1 and 255 and specifies how fast the fans should spin.</p> <p>Include the fan script in initramfs and update the initramfs image:</p> <pre><code>$ sudo chmod +x /etc/initramfs-tools/scripts/init-top/fan\n$ sudo update-initramfs -u -k all\n$ sudo reboot\n</code></pre>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#update-bootloader","title":"Update bootloader","text":"<pre><code>$ nand-sata-install\n# select option 5 \"Install/Update the bootloader on SD/eMMC\"\n</code></pre>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#disable-ncq","title":"Disable NCQ","text":"<p>Edit <code>/boot/armbianEnv.txt</code> and add the following</p> <pre><code>extraargs=libata.force=noncq\n</code></pre> <p>The output should show actions performed on the file and the process ID performing those actions.</p>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/helios64/#fan-management","title":"Fan management","text":"<p>The standard fans shipped with the Helios64 were rather noisy and therefor replaced by two Noctua NF-A8 PWM fans. A custom fancontrol configuration was also implemented:</p> <pre><code>$ cat /etc/fancontrol\n# Helios64 PWM Fan Control Configuration\n# Temp source : /dev/thermal-cpu\nINTERVAL=10\nFCTEMPS=/dev/fan-p6/pwm1=/dev/thermal-cpu/temp1_input /dev/fan-p7/pwm1=/dev/thermal-cpu/temp1_input\nMINTEMP=/dev/fan-p6/pwm1=40 /dev/fan-p7/pwm1=40\nMAXTEMP=/dev/fan-p6/pwm1=75 /dev/fan-p7/pwm1=75\nMINSTART=/dev/fan-p6/pwm1=125 /dev/fan-p7/pwm1=125\nMINSTOP=/dev/fan-p6/pwm1=100 /dev/fan-p7/pwm1=100\nMINPWM=125\n</code></pre>","tags":["helios64","kobol.io","Network Attached Storage","NAS"]},{"location":"hardware/mn25/","title":"T-bao Tbook MN25","text":"<p>Ultra-compact form-factor PC powered by AMD's Ryzen 5 2500U APU that can fit on the palm of one's hand.</p>","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#specifications","title":"Specifications","text":"","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#cpu-information","title":"CPU information","text":"<pre><code>$ sed '/^$/d' &lt; /proc/cpuinfo | grep -m 1 'model name' | cut -c14-\nAMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\n</code></pre> Full output <pre><code>$ cat /proc/cpuinfo\nprocessor       : 0\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\nstepping        : 0\nmicrocode       : 0x810100b\ncpu MHz         : 1369.852\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 0\ncpu cores       : 4\napicid          : 0\ninitial apicid  : 0\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveoptxsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1 spectre_v2\nspec_store_bypass\nbogomips        : 3992.26\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 1\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\nstepping        : 0\nmicrocode       : 0x810100b\ncpu MHz         : 1372.306\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 0\ncpu cores       : 4\napicid          : 1\ninitial apicid  : 1\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveoptxsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1 spectre_v2\nspec_store_bypass\nbogomips        : 3992.26\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 2\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\nstepping        : 0\nmicrocode       : 0x810100b\ncpu MHz         : 1369.874\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 1\ncpu cores       : 4\napicid          : 2\ninitial apicid  : 2\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveoptxsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1 spectre_v2\nspec_store_bypass\nbogomips        : 3992.26\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 3\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\nstepping        : 0\nmicrocode       : 0x810100b\ncpu MHz         : 1369.609\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 1\ncpu cores       : 4\napicid          : 3\ninitial apicid  : 3\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveoptxsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1 spectre_v2\nspec_store_bypass\nbogomips        : 3992.26\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 4\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\nstepping        : 0\nmicrocode       : 0x810100b\ncpu MHz         : 1482.444\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 2\ncpu cores       : 4\napicid          : 4\ninitial apicid  : 4\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveoptxsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1 spectre_v2\nspec_store_bypass\nbogomips        : 3992.26\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 5\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\nstepping        : 0\nmicrocode       : 0x810100b\ncpu MHz         : 1592.691\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 2\ncpu cores       : 4\napicid          : 5\ninitial apicid  : 5\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveoptxsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1 spectre_v2\nspec_store_bypass\nbogomips        : 3992.26\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 6\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\nstepping        : 0\nmicrocode       : 0x810100b\ncpu MHz         : 1382.927\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 3\ncpu cores       : 4\napicid          : 6\ninitial apicid  : 6\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveoptxsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1 spectre_v2\nspec_store_bypass\nbogomips        : 3992.26\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n\nprocessor       : 7\nvendor_id       : AuthenticAMD\ncpu family      : 23\nmodel           : 17\nmodel name      : AMD Ryzen 5 PRO 2500U w/ Radeon Vega Mobile Gfx\nstepping        : 0\nmicrocode       : 0x810100b\ncpu MHz         : 1501.802\ncache size      : 512 KB\nphysical id     : 0\nsiblings        : 8\ncore id         : 3\ncpu cores       : 4\napicid          : 7\ninitial apicid  : 7\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge\nmca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt\npdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid\naperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt\naes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm\nsse4a misalignsse 3dnowprefetch osvw skinit wdt tce topoext perfctr_core\nperfctr_nb bpext perfctr_llc mwaitx cpb hw_pstate sme ssbd sev ibpb vmmcall\nsev_es fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni\nxsaveoptxsavec xgetbv1 xsaves clzero irperf xsaveerptr arat npt lbrv\nsvm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists\npausefilter pfthreshold avic v_vmsave_vmload vgif overflow_recov succor\nsmca\nbugs            : sysret_ss_attrs null_seg spectre_v1 spectre_v2\nspec_store_bypass\nbogomips        : 3992.26\nTLB size        : 2560 4K pages\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 43 bits physical, 48 bits virtual\npower management: ts ttp tm hwpstate eff_freq_ro [13] [14]\n</code></pre>","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#amd-ryzentm-5-2500u","title":"AMD Ryzen\u2122 5 2500U","text":"<ul> <li>Product Page</li> </ul>","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#memory-information","title":"Memory information","text":"<p>See Memory upgrades</p> <pre><code>$ cat /proc/meminfo\nMemTotal:       16153356 kB\nMemFree:        14831832 kB\nMemAvailable:   15287960 kB\nBuffers:           62416 kB\nCached:           600420 kB\nSwapCached:            0 kB\nActive:           169228 kB\nInactive:         890408 kB\nActive(anon):        500 kB\nInactive(anon):   366888 kB\nActive(file):     168728 kB\nInactive(file):   523520 kB\nUnevictable:           0 kB\nMlocked:               0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\nDirty:                60 kB\nWriteback:             0 kB\nAnonPages:        336712 kB\nMapped:           357604 kB\nShmem:               876 kB\nKReclaimable:      30800 kB\nSlab:              89408 kB\nSReclaimable:      30800 kB\nSUnreclaim:        58608 kB\nKernelStack:        4608 kB\nPageTables:         4808 kB\nNFS_Unstable:          0 kB\nBounce:                0 kB\nWritebackTmp:          0 kB\nCommitLimit:     8076676 kB\nCommitted_AS:    1581296 kB\nVmallocTotal:   34359738367 kB\nVmallocUsed:       26100 kB\nVmallocChunk:          0 kB\nPercpu:             9024 kB\nHardwareCorrupted:     0 kB\nAnonHugePages:    194560 kB\nShmemHugePages:        0 kB\nShmemPmdMapped:        0 kB\nFileHugePages:         0 kB\nFilePmdMapped:         0 kB\nHugePages_Total:       0\nHugePages_Free:        0\nHugePages_Rsvd:        0\nHugePages_Surp:        0\nHugepagesize:       2048 kB\nHugetlb:               0 kB\nDirectMap4k:      145348 kB\nDirectMap2M:     5838848 kB\nDirectMap1G:    11534336 kB\n</code></pre>","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#upgrades","title":"Upgrades","text":"","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#memory","title":"Memory","text":"<p>T-bao Tbook MN25's come with either 4/8/16/32GB of DDR-2400 non ECC memory as standard. The 8GB model comes with 2 x 4GB MAIGUANG sticks, part number <code>MG8ATF511264HZ-2G1A2</code>.</p> <p>Upgraded to 16GB of DDR4-2666 memory from Corsair with part number <code>CMSX8GX4M1A2666C18</code>.</p> <p>Note</p> <p>DDR4-2666 memory is going to run at 2400 Mhz as that's the maximum memory frequency supported by the AMD Ryzen 5 PRO 2500U. Faster RAM was purchased because it was cheaper.</p> <ul> <li>Memory Product page</li> </ul>","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#nvme-ssd","title":"NVMe SSD","text":"<p>T-bao Tbook MN25's comes with either 128/256/512GB of ASint NVMe SSD. As the NVMe SSD is located on the underside of the MN25 and receives no direct cooling, it tends to overheat quite often and prevent the device from booting. A small heat sink aleviates most temperature issues but the ASint drive remains a relatively cost effective drive so performance remains underwhelming.</p> <p>Upgraded to a Samsung 980 500GB SSD, part number <code>MZ-V8V500BW</code> just as in the QNAP TS-873A.</p> <p>As a preventative measure to any further overheating issues, the drive was fitted with a 10mm ICY BOX M.2 SSD heat sink.</p> <ul> <li>SSD Datasheet</li> <li>Heat Sink Datasheet</li> </ul>","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#potential-additional-upgrades","title":"Potential additional upgrades","text":"","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/mn25/#sata-ssd","title":"SATA SSD","text":"<p>T-bao's Tbook MN25 support one 2.5 inch SATA SSD. Any of the Samsung 860 PRO, Samsung 870 EVO or Crucial MX 500 would be more than adequate for the job.</p>","tags":["T-bao","MN25","mini pc"]},{"location":"hardware/remarkable2/","title":"Remarkable 2","text":"<p>The Remarkable 2 or why you won't ever need paper notebooks again.</p>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#specifications","title":"Specifications","text":"","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#linux-kernel","title":"Linux kernel","text":"<p>Running <code>Software release 3.14</code>.</p> <pre><code>$ uname -a\nLinux reMarkable 5.4.70-v1.3.4-rm11x #1 SMP PREEMPT Wed Mar 15 06:06:44 UTC 2023 armv7l GNU/Linux\n</code></pre> Older versions <p>Running <code>Software release 3.9</code>.</p> <pre><code>$ uname -a\nLinux reMarkable 5.4.70-v1.3.4-rm11x #1 SMP PREEMPT Wed Mar 15 06:06:44 UTC 2023 armv7l GNU/Linux\n</code></pre> <p>Running <code>Software release 2.9/2.10/2.11</code>.</p> <pre><code>$ uname -a\nLinux reMarkable 5.4.70 #1 SMP PREEMPT Thu Aug 5 23:25:37 UTC 2021 armv7l GNU/Linux\n</code></pre>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#cpu-information","title":"CPU information","text":"<pre><code>$ sed '/^$/d' &lt; /proc/cpuinfo | grep -m 1 'model name' | cut -c14-\nARMv7 Processor rev 5 (v7l)\n</code></pre> Full output <pre><code>$ cat /proc/cpuinfo\nprocessor       : 0\nmodel name      : ARMv7 Processor rev 5 (v7l)\nBogoMIPS        : 16.00\nFeatures        : half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva\nidivt vfpd32 lpae evtstrm\nCPU implementer : 0x41\nCPU architecture: 7\nCPU variant     : 0x0\nCPU part        : 0xc07\nCPU revision    : 5\n\nprocessor       : 1\nmodel name      : ARMv7 Processor rev 5 (v7l)\nBogoMIPS        : 16.00\nFeatures        : half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva\nidivt vfpd32 lpae evtstrm\nCPU implementer : 0x41\nCPU architecture: 7\nCPU variant     : 0x0\nCPU part        : 0xc07\nCPU revision    : 5\n\nHardware        : Freescale i.MX7 Dual (Device Tree)\nRevision        : 0000\nSerial          : 2638952245970\n</code></pre>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#nxptm-imx7-dual","title":"NXP\u2122 i.MX7 Dual","text":"<p>NXP Semiconductors and Freescale Semiconductor announced a merger agreement in March 2015.</p> <ul> <li>Product Page</li> <li>Datasheet</li> </ul>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#memory-information","title":"Memory information","text":"<pre><code>$ cat /proc/meminfo\nMemTotal:         994900 kB\nMemFree:          356876 kB\nMemAvailable:     798216 kB\nBuffers:            8900 kB\nCached:           460332 kB\nSwapCached:            0 kB\nActive:           175044 kB\nInactive:         404864 kB\nActive(anon):     110920 kB\nInactive(anon):    21156 kB\nActive(file):      64124 kB\nInactive(file):   383708 kB\nUnevictable:           0 kB\nMlocked:               0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\nDirty:                 0 kB\nWriteback:             0 kB\nAnonPages:        110672 kB\nMapped:            64732 kB\nShmem:             21404 kB\nKReclaimable:       8928 kB\nSlab:              18656 kB\nSReclaimable:       8928 kB\nSUnreclaim:         9728 kB\nKernelStack:         864 kB\nPageTables:         1340 kB\nNFS_Unstable:          0 kB\nBounce:                0 kB\nWritebackTmp:          0 kB\nCommitLimit:      497448 kB\nCommitted_AS:     353108 kB\nVmallocTotal:    1032192 kB\nVmallocUsed:         844 kB\nVmallocChunk:          0 kB\nPercpu:              168 kB\nCmaTotal:         327680 kB\nCmaFree:          294544 kB\n</code></pre>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#configuration","title":"Configuration","text":"","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#change-ssh-password","title":"Change SSH password","text":"<p>The default IP and SSH password of the Remarkable tablet can be found in the settings menu. Navigate to it as follows: <code>Menu &gt; Settings &gt; General &gt; Help &gt; About &gt; Copyrights and licenses &gt; General information &gt; GPLv3 Compliance</code>.</p> <p>The password is stored in <code>/home/root/.config/remarkable/xochitl.conf</code>.</p> <pre><code>[General]\nDeveloperPassword=remarkable\n</code></pre> Older versions <p>Running <code>Software release 2.x</code>.</p> <p>The password is stored in <code>/etc/remarkable.conf</code>.</p>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#fix-ssh-lag","title":"Fix SSH lag","text":"<p>Execute the following command on the device:</p> <pre><code>$ iw wlan0 set power_save off\n</code></pre>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#updating-timezone","title":"Updating timezone","text":"<p>The Remarkable's timezone is set to <code>UTC</code>. Due to unknown reasons, the reMarkable interface does not expose a visible clock to the user. remarkable-hacks does expose a clock to the user, hence why we need to set the correct timezone.</p> <pre><code>$ timedatectl set-timezone \"Europe/Paris\"\n</code></pre> <p>To see what timezones are available look at the contents of <code>/usr/share/zoneinfo</code>.</p>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#additional-functionality","title":"Additional functionality","text":"","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#software-release-2x","title":"Software release 2.x","text":"<p>remarkable-hacks adds a literal metric ton of additional features to the Remarkable. Follow the installation instructions in the project's README.</p>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"hardware/remarkable2/#software-release-3x","title":"Software release 3.x","text":"<p>rm-hacks seems to be the spiritual successor to remarkable-hacks on software 3.x+.</p>","tags":["remarkable","paper","tablet","e-ink"]},{"location":"keyboards/lube/","title":"Lube","text":"<p>Lube is the best way to enhance the smoothness of the switches on your mechanical keyboard. Here's a non-exhaustive list of the most popular lubes. When lubing switches, remember that less is more and light applications are recommended for the best results.</p> <p>Krytox\u2122 is produced by and a registered trademark of The Chemours Company. TriboSys\u2122 is produced by and is a trademark of Miller-Stephenson Chemical Company.</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#oils","title":"Oils","text":"VPF 1514 GPL 103 GPL 104 GPL 105 GPL 106 GPL 107 Operating Temperature (\u00b0C) -54 to 160 -60 to 154 -51 to 159 -36 to 204 -36 to 260 -30 to 288 Viscosity (cSt) at 20\u00b0C 140 82 177 522 822 1535 Oil Density (g/mL) 1.89 1.92 1.93 1.94 1.95 1.95 Shelf Life (Year) 20 20 20 20 20 20 <p>Note</p> <p>VPF = Vacuum Pump Fluid GPL = General Purpose Lube</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#krytoxtm-vpf-1514","title":"Krytox\u2122 VPF-1514","text":"<p>Low-viscosity perfluoropolyether (PFPE) lubricating oil. Cheaper option to GPL range. Suitable for switch springs or as a thinner when combined with NLGI grade 2 greases (203g2, 204g2 or 205g2) to produce hybrid lubes such as \u2018GH V4\u2019.</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#krytoxtm-gpl-105","title":"Krytox\u2122 GPL 105","text":"<p>High-viscosity perfluoropolyether (PFPE) lubricating oil. Medium viscosity in GPL range, most popular option. Suitable for switch springs or tactile switches.</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#krytoxtm-gpl-107","title":"Krytox\u2122 GPL 107","text":"<p>High-viscosity perfluoropolyether (PFPE) lubricating oil. Second-highest viscosity of any available Krytox general-purpose oils. Suitable for switch springs or heavy, worn or uneven linear switches. Not suitable for tactile or clicky switches.</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#lube","title":"Lube","text":"","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#tribosystm-3203","title":"TriboSys\u2122 3203","text":"<p>Low-viscosity perfluoropolyether (PFPE) grease, thickened with polytetrafluoroethylene (PTFE). Comparable to Krytox\u2122 GPL 203g0. Suitable for tactile or clicky switches.</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#tribosystm-3204","title":"TriboSys\u2122 3204","text":"<p>Medium-viscosity perfluoropolyether (PFPE) grease, thickened with polytetrafluoroethylene (PTFE). Comparable to Krytox\u2122 GPL 204g0. Suitable for linear switches.</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#krytoxtm-gpl-205g0","title":"Krytox\u2122 GPL 205g0","text":"<p>High-viscosity perfluoropolyether (PFPE) grease, thickened with polytetrafluoroethylene (PTFE). Suitable for linear switches and stabilizers. Not suitable for tactile switches.</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"keyboards/lube/#krytoxtm-gpl-206g0","title":"Krytox\u2122 GPL 206g0","text":"<p>High-viscosity perfluoropolyether (PFPE) grease, thickened with polytetrafluoroethylene (PTFE). Suitable for heavy linear switches. Not suitable for tactile switches.</p>","tags":["Mechanical Keyboard","Switches'","Krytox","Tribosys"]},{"location":"linux/apt/","title":"APT: Advanced Package Tool","text":"","tags":["APT","package","Debian","Ubuntu"]},{"location":"linux/apt/#usage","title":"Usage","text":"","tags":["APT","package","Debian","Ubuntu"]},{"location":"linux/apt/#dont-start-service-on-installation","title":"Don't start service on installation","text":"<p>To prevent the automatic start of system services during installation, set the <code>RUNLEVEL</code> environment variable.</p> <pre><code>RUNLEVEL=1 apt install -y &lt;package&gt;\n</code></pre>","tags":["APT","package","Debian","Ubuntu"]},{"location":"linux/apt/#retrieve-package-information","title":"Retrieve package information","text":"<pre><code>$ apt-cache show alacritty\nPackage: alacritty\nStatus: install ok installed\nPriority: optional\nSection: x11\nInstalled-Size: 5933\nMaintainer: Martin Simon &lt;email.obfuscated@example.com&gt;\nArchitecture: amd64\nVersion: 0.9.0-1\nProvides: x-terminal-emulator\nDepends: libc6 (&gt;= 2.29), libfontconfig1 (&gt;= 2.12.6), libfreetype6 (&gt;= 2.8), libgcc-s1 (&gt;= 4.2), libxcb1 (&gt;= 1.6)\nRecommends: ncurses-term\nDescription: GPU-accelerated terminal emulator\n Alacritty is the fastest terminal emulator in existence. Using the GPU for\n rendering enables optimizations that simply aren't possible without it.\nDescription-md5: bf8f7998a09797b3ab5c3dbd67703aa2\nHomepage: https://github.com/alacritty/alacritty\n</code></pre>","tags":["APT","package","Debian","Ubuntu"]},{"location":"linux/apt/#retrieve-package-dependencies","title":"Retrieve package dependencies","text":"<pre><code>$ apt-cache showpkg alacritty\nPackage: alacritty\nVersions:\n0.9.0-1 (/var/lib/dpkg/status)\n Description Language:\n                 File: /var/lib/dpkg/status\n                  MD5: bf8f7998a09797b3ab5c3dbd67703aa2\n\n\nReverse Depends:\n  ncurses-term,alacritty 0.3.4~\nDependencies:\n0.9.0-1 - libc6 (2 2.29) libfontconfig1 (2 2.12.6) libfreetype6 (2 2.8) libgcc-s1 (2 4.2) libxcb1 (2 1.6) ncurses-term (0 (null))\nProvides:\n0.9.0-1 - x-terminal-emulator (= )\nReverse Provides:\n</code></pre>","tags":["APT","package","Debian","Ubuntu"]},{"location":"linux/apt/#retrieve-package-changelog","title":"Retrieve package changelog","text":"<pre><code>$ apt changelog alacritty\nalacritty (0.9.0-1) unstable; urgency=medium\n\n  * New upstream release\n  * Remove manual terminfo file installation\n  * Added `ncurses-term` to recommended package list\n\n -- Martin Simon &lt;email.obfuscated@example.com&gt;  Tue, 03 Aug 2021 00:00:00 +0000\n\nalacritty (0.9.0-rc5-1) unstable; urgency=medium\n\n  * New upstream release\n\n -- Martin Simon &lt;email.obfuscated@example.com&gt;  Mon, 02 Aug 2021 00:00:00 +0000\n\nalacritty (0.9.0-rc4-1) unstable; urgency=medium\n\n  * New upstream release\n\n -- Martin Simon &lt;email.obfuscated@example.com&gt;  Mon, 02 Aug 2021 00:00:00 +0000\n[...]\n</code></pre>","tags":["APT","package","Debian","Ubuntu"]},{"location":"linux/apt/#replicate-packages-list-on-different-hosts","title":"Replicate packages list on different hosts","text":"<p>On the source machine run:</p> <pre><code>$ apt-get update &amp;&amp; apt-get dist-upgrade\n$ cat /etc/apt/sources.list /etc/apt/sources.list.d/* &gt; sources.list\n$ dpkg --get-selections &gt; selections.list\n$ apt-mark auto &gt; auto.list\n</code></pre> <p>On the target machine run:</p> <pre><code>$ cp sources.list /etc/apt/\n$ apt-get update\n$ dpkg --set-selections &lt; selections.list\n$ apt-get dselect-upgrade\n$ xargs apt-mark auto &lt; auto.list\n</code></pre> <p>The package list on your target machine should now match the one on the source machine.</p>","tags":["APT","package","Debian","Ubuntu"]},{"location":"linux/bash/","title":"Bash \u2014 the Bourne Again SHell","text":"","tags":["bash","shell"]},{"location":"linux/bash/#usage","title":"Usage","text":"","tags":["bash","shell"]},{"location":"linux/bash/#temporarily-disable-alias","title":"Temporarily disable alias","text":"<p>Let's assume you've set up a neat <code>ls</code> alias:</p> <pre><code>alias ls='ls -lah --color=auto'\n</code></pre> <p>To temporarily disable said alias, prepend your command with <code>\\</code>:</p> <pre><code>$ ls\ntotal 12K\ndrwxrwxrwx 1 root root  512 Aug 28 18:28 .\ndrwxrwxrwx 1 root root  512 Aug 28 16:15 ..\ndrwxrwxrwx 1 root root  512 Aug 28 02:19 docs\ndrwxrwxrwx 1 root root  512 Aug 30  2021 .git\ndrwxrwxrwx 1 root root  512 Aug 25 17:51 .github\n-rwxrwxrwx 1 root root 6.9K Aug 25 17:51 LICENSE\n-rwxrwxrwx 1 root root 1.3K Aug 29 16:16 mkdocs.yml\ndrwxrwxrwx 1 root root  512 Aug 29 16:19 overrides\n-rwxrwxrwx 1 root root  399 Aug 30 03:03 README.md\n-rwxrwxrwx 1 root root   42 Aug 27 23:58 requirements.txt\n$ \\ls\ndocs  LICENSE  mkdocs.yml  overrides  README.md  requirements.txt\n</code></pre>","tags":["bash","shell"]},{"location":"linux/entware/","title":"Entware","text":"","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#usage","title":"Usage","text":"","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#compile-package-from-source","title":"Compile package from source","text":"","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#install-openwrt-sdk-build-system-dependencies","title":"Install OpenWrt SDK build system dependencies","text":"<pre><code>$ sudo apt-get update\n$ sudo apt-get install build-essential ccache ecj fastjar file g++ gawk gettext\\\ngit java-propose-classpath libelf-dev libncurses5-dev libncursesw5-dev\\\nlibssl-dev python python2.7-dev python3 unzip wget python3-distutils\\\npython3-setuptools python3-dev rsync subversion swig time xsltproc zlib1g-dev\n</code></pre>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#build-openwrt-toolchain","title":"Build OpenWrt toolchain","text":"<p>This is the cross-compilation toolchain for the QNAP TS-873A NAS.</p> <pre><code>$ git clone https://github.com/Entware/Entware.git\n$ cd Entware\n$ make package/symlinks\n$ cp configs/x64-3.2.config .config\n$ make tools/install -j$(nproc)\n$ make toolchain/install -j$(nproc)\n$ make target/compile -j$(nproc)\n</code></pre>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#customize-package-makefile","title":"Customize package Makefile","text":"<pre><code>$ nano Entware/feeds/rtndev/urbackup-server/Makefile\nTARGET_CFLAGS += -ggdb3\n</code></pre>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#compile-package","title":"Compile package","text":"<pre><code>$ cd Entware\n$ make package/urbackup-server/compile -j$(nproc) V=s\n</code></pre> <p>The build output will be available under <code>bin/targets/&lt;arch&gt;</code>.</p>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#enabling-debugging-symbols-when-compiling-package","title":"Enabling debugging symbols when compiling package","text":"<p><code>Entware (OpenWrt)</code> does not officially support debugging on device and therefor strips all symbols during package creation. The only way to debug programs on device is to use unstripped binaries on the build host and <code>gdbserver</code> on device.</p> <p>Follow the instructions above but stop before compiling the package.</p>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#the-easy-way","title":"The easy way","text":"<p>Danger</p> <p>Here be dragons! This method is not officially supported and could have unforeseen side effects.</p>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#disable-entware-openwrt-rstrip-function","title":"Disable Entware (OpenWrt) RSTRIP function","text":"<p>To disable the strip feature baked into Entware's <code>rules.mk</code>, add</p> <pre><code>RSTRIP:=:\n</code></pre> <p>after</p> <pre><code>include $(INCLUDE_DIR)/package.mk\n</code></pre> <p>in your package's Makefile.</p> <p> Source </p>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#the-hard-but-official-way","title":"The hard but official way","text":"","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#enable-compiling-tools","title":"Enable compiling tools","text":"<p>In the directory the Entware repository was cloned to, run <code>menuconfig</code></p> <pre><code>$ make menuconfig\n</code></pre> <p>Enable the <code>GNU debugger gdb</code> and <code>GNU debugger gdbserver</code> and as follows</p> <pre><code>Advanced configuration options (for developers) &gt; Toolchain Options &gt; Build gdb\nDevelopment &gt; gdbserver\n</code></pre>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#add-debugging-to-package","title":"Add debugging to package","text":"<p>Add CFLAGS to the package Makefile and recompile.</p> <pre><code>TARGET_CFLAGS += -ggdb3\n</code></pre> <p>Alternatively recompile the package with CONFIG_DEBUG set.</p> <pre><code>$ make package/urbackup-server/compile -j$(nproc) V=s CONFIG_DEBUG=y\n</code></pre> <p>Or you can enable debug info in menuconfig</p> <pre><code>Global build settings &gt; Compile packages with debugging info\n</code></pre>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/entware/#using-the-gnu-debugger","title":"Using the GNU debugger","text":"<p>Start <code>gdbserver</code> on the target device.</p> <pre><code>$ gdbserver :9000 urbackupsrv run -u admin -v debug\n</code></pre> <p>In the compiling tree, use the Entware (OpenWrt) <code>remote-gdb</code> script.</p> <pre><code>$ ./scripts/remote-gdb 10.0.1.100:9000 ./build_dir/target-x86_64_glibc-2.27/urbackup-server-2.4.13/urbackupsrv\n</code></pre> <p>You'll be dropped into a gdb shell and will be able to set breakpoints, start program, backtraces, etc...</p> <pre><code>(gdb) b source-file.c:123\n(gdb) c\n(gdb) bt\n</code></pre> <p>If you want to restart the program, you'll need to set the remote path and arguments.</p> <pre><code>(gdb) set remote exec-file /opt/bin/urbackupsrv\n(gdb) set args run -u admin -v debug\n(gdb) run\n(gdb) bt\n</code></pre> <p>     Source: OpenWrt Documentation </p>","tags":["Entware","Optware","opkg","ipkg","package"]},{"location":"linux/fwupd/","title":"fwupd","text":"<p>fwupd is a simple daemon allowing you to update some devices' firmware, including UEFI for several machines.</p>","tags":["firmware","bios","LVFS"]},{"location":"linux/fwupd/#installation","title":"Installation","text":"<pre><code>$ apt install fwupd\n</code></pre>","tags":["firmware","bios","LVFS"]},{"location":"linux/fwupd/#usage","title":"Usage","text":"<p>Display all detected devices, the output below is from a Thinkpad A485:</p> <pre><code>$ fwupdmgr get-devices\n20MUCTO1WW\n\u2502\n\u251c\u2500INTEL SSDPEKKF256G8L:\n\u2502     Device ID:          3743975ad7f64f8d6575a9ae49fb3a8856fe186f\n\u2502     Summary:            NVM Express Solid State Drive\n\u2502     Current version:    L08P\n\u2502     Vendor:             Intel Corporation (NVME:0x8086)\n\u2502     GUIDs:              f91a5c60-8696-539e-9d0a-57d194f74ac4\n\u2502                         396fb4fd-7656-564f-88b5-381e83ca30c0\n\u2502                         79517f86-8df8-5d6e-a18b-33f0b36a78e9\n\u2502                         68db11e5-b0cf-5bc9-a94e-17e28496e505\n\u2502                         cdc79848-b022-5a05-a77a-862f21df0c29\n\u2502     Device Flags:       \u2022 Internal device\n\u2502                         \u2022 Updatable\n\u2502                         \u2022 System requires external power source\n\u2502                         \u2022 Needs a reboot after installation\n\u2502                         \u2022 Device is usable for the duration of the update\n\u2502\n\u251c\u2500System Firmware:\n\u2502 \u2502   Device ID:          ed52bde4c2fa3be2e57206a51ecb00d0219d6bcb\n\u2502 \u2502   Current version:    0.1.45\n\u2502 \u2502   Minimum Version:    0.1.45\n\u2502 \u2502   Vendor:             LENOVO (DMI:LENOVO)\n\u2502 \u2502   GUIDs:              ff8bc5c6-2169-42b7-907b-c726a9c2dab2\n\u2502 \u2502                       230c8b18-8d9b-53ec-838b-6cfc0383493a\n\u2502 \u2502                       8cf29274-0132-594f-a561-02696eb4eda4\n\u2502 \u2502   Device Flags:       \u2022 Internal device\n\u2502 \u2502                       \u2022 Updatable\n\u2502 \u2502                       \u2022 System requires external power source\n\u2502 \u2502                       \u2022 Supported on remote server\n\u2502 \u2502                       \u2022 Needs a reboot after installation\n\u2502 \u2502                       \u2022 Cryptographic hash verification is available\n\u2502 \u2502                       \u2022 Device is usable for the duration of the update\n\u2502 \u2502\n\u2502 \u2514\u2500UEFI dbx:\n\u2502       Device ID:        362301da643102b9f38477387e2193e57abaa590\n\u2502       Summary:          UEFI Revocation Database\n\u2502       Current version:  77\n\u2502       Minimum Version:  77\n\u2502       Vendor:           UEFI:Linux Foundation\n\u2502       Install Duration: 1 second\n\u2502       GUIDs:            0477b68d-b0db-5cb9-bfe2-ea54879b925a\n\u2502                         60f9de84-e7a3-5f5c-b0e8-cc39d95f865b\n\u2502                         c6682ade-b5ec-57c4-b687-676351208742\n\u2502                         f8ba2887-9411-5c36-9cee-88995bb39731\n\u2502       Device Flags:     \u2022 Internal device\n\u2502                         \u2022 Updatable\n\u2502                         \u2022 Needs a reboot after installation\n\u2502\n\u251c\u2500UEFI Device Firmware:\n\u2502     Device ID:          d40c74fc1cd9aaa8423ea15ee7dcdb5b07cf808b\n\u2502     Current version:    4294967152\n\u2502     Minimum Version:    4294967152\n\u2502     Vendor:             DMI:LENOVO\n\u2502     GUIDs:              7f2df857-c3eb-44aa-b906-39cd03170770\n\u2502                         0de7e49d-1183-5a9f-abcd-77817b577ed5\n\u2502     Device Flags:       \u2022 Internal device\n\u2502                         \u2022 Updatable\n\u2502                         \u2022 System requires external power source\n\u2502                         \u2022 Needs a reboot after installation\n\u2502                         \u2022 Device is usable for the duration of the update\n\u2502\n\u251c\u2500UEFI Device Firmware:\n\u2502     Device ID:          4354ccbb577b307820024ceb0c278e0a276a973d\n\u2502     Current version:    16909369\n\u2502     Minimum Version:    1\n\u2502     Vendor:             DMI:LENOVO\n\u2502     GUIDs:              1434e005-f4d0-438a-b1a4-b649c051a796\n\u2502                         ec5a37ae-78fd-51d4-9d1a-ef435f91d3a0\n\u2502     Device Flags:       \u2022 Internal device\n\u2502                         \u2022 Updatable\n\u2502                         \u2022 System requires external power source\n\u2502                         \u2022 Needs a reboot after installation\n\u2502                         \u2022 Device is usable for the duration of the update\n\u2502\n\u251c\u2500UEFI Device Firmware:\n\u2502     Device ID:          4de501752c7423618c1a1376cd4b14f399827ede\n\u2502     Current version:    17040444\n\u2502     Minimum Version:    1\n\u2502     Vendor:             DMI:LENOVO\n\u2502     GUIDs:              0655db59-d680-49d3-863d-83d5bac59568\n\u2502                         c5000566-551f-5380-9a27-6a8e242999cf\n\u2502     Device Flags:       \u2022 Internal device\n\u2502                         \u2022 Updatable\n\u2502                         \u2022 System requires external power source\n\u2502                         \u2022 Needs a reboot after installation\n\u2502                         \u2022 Device is usable for the duration of the update\n\u2502\n\u251c\u2500UEFI Device Firmware:\n\u2502     Device ID:          5d5bea04759f7663b03266fad519d98e5d51a140\n\u2502     Current version:    4784132\n\u2502     Minimum Version:    4784132\n\u2502     Vendor:             DMI:LENOVO\n\u2502     GUIDs:              4fcecda9-f412-4623-b603-fb6a9495df5b\n\u2502                         a2bd78fe-2b8a-50d6-bc3d-c7b28834e956\n\u2502     Device Flags:       \u2022 Internal device\n\u2502                         \u2022 Updatable\n\u2502                         \u2022 System requires external power source\n\u2502                         \u2022 Needs a reboot after installation\n\u2502                         \u2022 Device is usable for the duration of the update\n\u2502\n\u2514\u2500UEFI Device Firmware:\n      Device ID:          0309fe7d84b0b8e838ad1b2f22bd153906121cfc\n      Current version:    65569\n      Minimum Version:    1\n      Vendor:             DMI:LENOVO\n      GUIDs:              4bea12df-56e3-4cdb-97dd-f133768c9051\n                          31bfb296-9f8b-5519-94ad-04dadf19d202\n      Device Flags:       \u2022 Internal device\n                          \u2022 Updatable\n                          \u2022 System requires external power source\n                          \u2022 Needs a reboot after installation\n                          \u2022 Device is usable for the duration of the update\n</code></pre> <p>Download the latest metadata from the Linux Vendor firmware Service (LVFS):</p> <pre><code>$ fwupdmgr refresh\nUpdating lvfs\nDownloading\u2026             [***************************************]\nSuccessfully downloaded new metadata: 1 local device supported\n</code></pre> <p>List updates available for devices on system:</p> <pre><code>$ fwupdmgr get-updates\nDevices with no available firmware updates:\n \u2022 INTEL SSDPEKKF256G8L\n \u2022 UEFI Device Firmware\n \u2022 UEFI Device Firmware\n \u2022 UEFI Device Firmware\n \u2022 UEFI Device Firmware\n \u2022 UEFI Device Firmware\n \u2022 UEFI dbx\nDevices with the latest available firmware version:\n \u2022 System Firmware\nNo updates available for remaining devices\n</code></pre> <p>Install updates:</p> <pre><code>$ fwupdmgr update\n</code></pre> <p>Note</p> <ul> <li>Some device updates may require the root user</li> <li>Updates that can be applied live will be done immediately.</li> <li>Updates that run at bootup will be staged for the next reboot.</li> </ul>","tags":["firmware","bios","LVFS"]},{"location":"linux/grub/","title":"GRUB - GRand Unified Bootloader","text":"","tags":["grub","bootloader"]},{"location":"linux/grub/#configuration","title":"Configuration","text":"<p>Hint</p> <p>If you've changed grub configuration file <code>/etc/default/grub</code>, make sure to run <code>update-grub</code> to update its configuration.</p>","tags":["grub","bootloader"]},{"location":"linux/grub/#configuring-non-defaultolder-kernel-to-boot","title":"Configuring non-default/older kernel to boot","text":"","tags":["grub","bootloader"]},{"location":"linux/grub/#save-selected-kernel-in-console-menu","title":"Save selected kernel in console menu","text":"<p>Edit <code>/etc/default/grub</code> and add the following lines:</p> <pre><code>GRUB_DEFAULT=saved\nGRUB_SAVEDEFAULT=true\n</code></pre> <p>Reboot the device and select an entry in the GRUB menu/submenu. The selection will be saved as the default value. Manually selecting a different entry updates the saved value to become the new default.</p>","tags":["grub","bootloader"]},{"location":"linux/grub/#set-kernel-version-in-config-file","title":"Set kernel version in config file","text":"<p>Set e.g:</p> <pre><code>GRUB_DEFAULT=\"1&gt;2\"\n</code></pre> <p>Note</p> <p>GRUB menu entries numbering starts with 0. Therefore the <code>1</code> above points to the <code>Advanced</code> submenu and <code>2</code> points to the third entry of the submenu.</p>","tags":["grub","bootloader"]},{"location":"linux/grub/#themes","title":"Themes","text":"<p>Prefered GRUB themes are <code>shvchk/poly-dark</code>, <code>shvchk/poly-light</code> or <code>vinceliuice/grub2-themes</code></p>","tags":["grub","bootloader"]},{"location":"linux/letsencrypt/","title":"Let's Encrypt","text":"","tags":["Let's Encrypt","TLS","certificate"]},{"location":"linux/letsencrypt/#certbot","title":"certbot","text":"<p>certbot is a free, open source software tool for automatically using Let\u2019s Encrypt certificates on manually-administrated websites to enable HTTPS.</p>","tags":["Let's Encrypt","TLS","certificate"]},{"location":"linux/letsencrypt/#http-01-challenge","title":"HTTP-01 challenge","text":"<p>Install <code>certbot</code>: <pre><code>$ apt-get update\n$ apt-get install certbot\n</code></pre></p> <p>Add the following location to the Nginx HTTP vhost: <pre><code>location ^~ /.well-known/acme-challenge/ {\n    root /var/www/letsencrypt;\n    allow all;\n}\n</code></pre></p> <p>For Apache, use: <pre><code>Alias /.well-known/acme-challenge/ \"/var/www/letsencrypt/.well-known/acme-challenge/\"\n&lt;Directory \"/var/www/letsencrypt/\"&gt;\n    AllowOverride None\n    Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec\n    Require method GET POST OPTIONS\n&lt;/Directory&gt;\n</code></pre></p> <p>Request a certificate: <pre><code>$ certbot certonly --agree-tos --email admin@example.com --webroot -w /var/www/letsencrypt/ --rsa-key-size 4096 -d your_domain.tld -d your_domain2.tld -d your_domain3.tld\n</code></pre></p> <p>Generate a Diffie-Hellman key: <pre><code>$ openssl dhparam -out /etc/letsencrypt/live/your_domain.tld/dhparam.pem 4096\n</code></pre></p> <p>Add the following to the Nginx HTTPS vhost: <pre><code>    ssl_certificate /etc/letsencrypt/live/backup.homelab.lu/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/backup.homelab.lu/privkey.pem;\n    ssl_dhparam /etc/letsencrypt/live/backup.homelab.lu/dhparam.pem;\n    ssl_session_timeout 5m;\n    ssl_prefer_server_ciphers on;\n    ssl_session_tickets off;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    add_header Strict-Transport-Security \"max-age=15768000; includeSubDomains; preload\"; # six month\n    add_header X-Frame-Options DENY;\n    add_header X-Content-Type-Options nosniff;\n    add_header X-XSS-Protection \"1; mode=block\";\n</code></pre></p> <p>For Apache: <pre><code>    SSLEngine On\n    SSLCertificateFile /etc/letsencrypt/live/your_domain.tld/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/your_domain.tld/privkey.pem\n    # This is valid only for Apache 2.4.8 or later if using OpenSSL 1.0.2 or later\n    SSLOpenSSLConfCmd DHParameters /etc/letsencrypt/live/your_domain.tld/dhparam.pem\n    # Requires Apache 2.4.36 &amp; OpenSSL 1.1.1\n    SSLProtocol -all +TLSv1.3 +TLSv1.2\n    SSLOpenSSLConfCmd Curves X25519:secp521r1:secp384r1:prime256v1\n    # Older versions\n    # SSLProtocol All -SSLv2 -SSLv3 -TLSv1 -TLSv1.1\n    SSLHonorCipherOrder On\n    Header always set Strict-Transport-Security \"max-age=15768000; includeSubDomains; preload\"\n    Header always set X-Frame-Options DENY\n    Header always set X-Content-Type-Options nosniff\n    # Requires Apache &gt;= 2.4\n    SSLCompression off\n    SSLUseStapling on\n    SSLStaplingCache \"shmcb:logs/stapling-cache(150000)\"\n    # Requires Apache &gt;= 2.4.11\n    SSLSessionTickets Off\n</code></pre></p> <p>Make sure to visit https://syslink.pl/cipherlist/ to get an updated SSL cipher list for your webserver.</p> <p>Setup autorenewal of all the certificates: <pre><code>$ crontab -e\n30 3 * * 0 /usr/bin/certbot -q renew --renew-hook \"systemctl reload nginx\"\n</code></pre></p>","tags":["Let's Encrypt","TLS","certificate"]},{"location":"linux/letsencrypt/#dns-01-challenge","title":"DNS-01 challenge","text":"<p>Install <code>certbot</code>: <pre><code>$ apt-get update\n$ apt-get install certbot python3-certbot-nginx\n</code></pre> Install the necessary <code>certbot</code> DNS plugin, in this case for Cloudflare: <pre><code>$ apt-get install python3-certbot-dns-cloudflare\n</code></pre></p> <p>Create the necessary credentials file: <pre><code>$ nano /etc/letsencrypt/cloudflare.ini\ndns_cloudflare_api_token = exampletoken\n$ chmod 600 /etc/letsencrypt/cloudflare.ini\n</code></pre></p> <p>Request a certificate: <pre><code>$ certbot certonly \\\n  --agree-tos \\\n  --dns-cloudflare \\\n  --dns-cloudflare-credentials /etc/letsencrypt/cloudflare.ini \\\n  --dns-cloudflare-propagation-seconds 10 \\\n  --rsa-key-size 4096 \\\n  -d your_domain.tld\n</code></pre></p> <p>Generate a Diffie-Hellman key: <pre><code>$ openssl dhparam -out /etc/letsencrypt/live/your_domain.tld/dhparam.pem 4096\n</code></pre></p> <p>Add the following to the Nginx HTTPS vhost: <pre><code>    ssl_certificate /etc/letsencrypt/live/your_domain.tld/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your_domain.tld/privkey.pem;\n    ssl_dhparam /etc/letsencrypt/live/your_domain.tld/dhparam.pem;\n    ssl_session_timeout 5m;\n    ssl_prefer_server_ciphers on;\n    ssl_session_tickets off;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    add_header Strict-Transport-Security \"max-age=15768000; includeSubDomains; preload\"; # six month\n    add_header X-Frame-Options DENY;\n    add_header X-Content-Type-Options nosniff;\n    add_header X-XSS-Protection \"1; mode=block\";\n</code></pre></p> <p>For Apache: <pre><code>    SSLEngine On\n    SSLCertificateFile /etc/letsencrypt/live/your_domain.tld/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/your_domain.tld/privkey.pem\n    # This is valid only for Apache 2.4.8 or later if using OpenSSL 1.0.2 or later\n    SSLOpenSSLConfCmd DHParameters /etc/letsencrypt/live/your_domain.tld/dhparam.pem\n    # Requires Apache 2.4.36 &amp; OpenSSL 1.1.1\n    SSLProtocol -all +TLSv1.3 +TLSv1.2\n    SSLOpenSSLConfCmd Curves X25519:secp521r1:secp384r1:prime256v1\n    # Older versions\n    # SSLProtocol All -SSLv2 -SSLv3 -TLSv1 -TLSv1.1\n    SSLHonorCipherOrder On\n    Header always set Strict-Transport-Security \"max-age=15768000; includeSubDomains; preload\"\n    Header always set X-Frame-Options DENY\n    Header always set X-Content-Type-Options nosniff\n    # Requires Apache &gt;= 2.4\n    SSLCompression off\n    SSLUseStapling on\n    SSLStaplingCache \"shmcb:logs/stapling-cache(150000)\"\n    # Requires Apache &gt;= 2.4.11\n    SSLSessionTickets Off\n</code></pre></p> <p>Make sure to visit https://syslink.pl/cipherlist/ to get a list of updated ciphers for your webserver.</p> <p>Setup autorenewal of all the certificates: <pre><code>$ crontab -e\n30 3 * * 0 /usr/bin/certbot -q renew --renew-hook \"systemctl reload nginx\"\n</code></pre></p> <p>Hint</p> <p>If DNS records get wiped by accident, credentials as well as CNAMEs for all domains are stored in <code>/etc/letsencrypt/acmedns.json</code>.</p>","tags":["Let's Encrypt","TLS","certificate"]},{"location":"linux/letsencrypt/#acmesh","title":"acme.sh","text":"<p>acme.sh is a pure Unix shell script implementing ACME client protocol.</p>","tags":["Let's Encrypt","TLS","certificate"]},{"location":"linux/letsencrypt/#dns-01-challenge_1","title":"DNS-01 challenge","text":"<pre><code>$ cd /tmp\n$ git clone https://github.com/acmesh-official/acme.sh.git\n$ cd acme.sh\n$ ./acme.sh --install --nocron --home /opt/etc/acme.sh --accountemail \"user@example.com\"\n$ nano /opt/etc/acme.sh/dnsapi/dns_ovh.sh\n\n# set your variables\n#Application Key\nOVH_AK=\"foo\"\n\n#Application Secret\nOVH_AS=\"bar\"\n\n#Consumer Key\nOVH_CK=\"foobar\"\n\n$ /opt/etc/acme.sh/acme.sh --home /opt/etc/acme.sh --server letsencrypt --issue -d example.com --dns dns_ovh\n$ crontab -e\n30 3 * * 0 \"/opt/etc/acme.sh/acme.sh\" --cron --home \"/opt/etc/acme.sh/\" &gt; /dev/null\n</code></pre>","tags":["Let's Encrypt","TLS","certificate"]},{"location":"linux/mdadm/","title":"mdadm: Linux software RAID","text":"","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/mdadm/#installation","title":"Installation","text":"<pre><code>$ apt-get install mdadm\n</code></pre>","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/mdadm/#usage","title":"Usage","text":"","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/mdadm/#check-software-raid-array-status","title":"Check software RAID array status","text":"<p>Use the following command:</p> <pre><code>$ cat /proc/mdstat\n</code></pre> <p>or</p> <pre><code>$ mdadm -D /dev/mdX\n</code></pre> <p>Output in case of non-existant RAID device:</p> <pre><code>$ mdadm -D /dev/md0\nPersonalities :\nunused devices: &lt;none&gt;\n</code></pre> <p>Output for RAID6 device:</p> <pre><code>$ mdadm -D /dev/md0\nPersonalities : [raid6] [raid5] [raid4] [linear] [multipath] [raid0] [raid1] [raid10]\nmd0 : active raid6 sdc[2] sda[0] sdd[3] sdb[1] sde[4]\n      35156259840 blocks super 1.2 level 6, 512k chunk, algorithm 2 [5/5] [UUUUU]\n\nunused devices: &lt;none&gt;\n</code></pre> <p>A progress bar is displayed under partitions when a RAID resync process is currently running:</p> <pre><code>$ mdadm -D /dev/md0\nPersonalities : [raid6] [raid5] [raid4] [linear] [multipath] [raid0] [raid1] [raid10]\nmd0 : active raid6 sde[4] sdb[1] sdd[3] sda[0] sdc[2]\n      35156259840 blocks super 1.2 level 6, 512k chunk, algorithm 2 [5/5] [UUUUU]\n      [=======&gt;.............]  resync = 35.0% (4101838624/11718753280) finish=1179.1min speed=107662K/sec\n\nunused devices: &lt;none&gt;\n</code></pre>","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/mdadm/#speed-up-software-raid-resync","title":"Speed up software RAID resync","text":"","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/mdadm/#increase-speed-limits","title":"Increase speed limits","text":"<p>Check current speed:</p> <p><pre><code>$ sysctl dev.raid.speed_limit_min\n$ sysctl dev.raid.speed_limit_max\n</code></pre> These values are set in Kibibytes per second (KiB/s).</p> <p>Increase target rebuild speed:</p> <pre><code>$ echo 50000 &gt; /proc/sys/dev/raid/speed_limit_min\n$ echo 200000 &gt; /proc/sys/dev/raid/speed_limit_max\n</code></pre> <p>or</p> <pre><code>$ sysctl -w dev.raid.speed_limit_min=50000\n$ sysctl -w dev.raid.speed_limit_max=200000\n</code></pre> <p>Permanently override default values in <code>/etc/sysctl.conf</code>:</p> <pre><code>$ dev.raid.speed_limit_min = 50000\n$ dev.raid.speed_limit_max = 200000\n</code></pre>","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/mdadm/#disable-ncq-on-all-disks","title":"Disable NCQ on all disks","text":"<pre><code>for i in sd[abcde]\ndo\n    echo 1 &gt; /sys/block/$i/device/queue_depth\ndone\n</code></pre>","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/mdadm/#set-read-ahead-option","title":"Set read-ahead option","text":"<p>Get the current read-ahead value:</p> <pre><code>$ blockdev --getra /dev/mdX\n</code></pre> <p>Set read-ahead (in 512-byte sectors) per RAID device.</p> <pre><code>$ blockdev --setra 65536 /dev/mdX\n</code></pre>","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/mdadm/#increase-stripe-cache-size","title":"Increase stripe cache size","text":"<p>Records the size (in pages per device) of the stripe cache which is used for synchronising all write operations to the array and all read operations if the array is degraded. By default, the size of the stripe cache is 256 pages and Linux uses 4096B pages. If you use 256 pages for the stripe cache and you have 10 disks, the cache would use 102564096=10MiB of RAM. Only available on RAID5 and RAID6 and boost sync performance by 3-6 times.</p> <pre><code>$ echo 4096 &gt; /sys/block/mdX/md/stripe_cache_size\n</code></pre>","tags":["mdadm","RAID","software","array","disk"]},{"location":"linux/nginx/","title":"Nginx","text":"","tags":["nginx","web","server"]},{"location":"linux/nginx/#usage","title":"Usage","text":"","tags":["nginx","web","server"]},{"location":"linux/nginx/#check-nginx-configuration-syntax","title":"Check Nginx configuration syntax","text":"<p>Test Nginx configuration</p> <pre><code>$ sudo nginx -t\n</code></pre> <p>Test Nginx configuration and dump output:</p> <pre><code>$ sudo nginx -T\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#configuration","title":"Configuration","text":"","tags":["nginx","web","server"]},{"location":"linux/nginx/#hide-nginx-server-version","title":"Hide Nginx server version","text":"<p>To prevent Nginx from displaying it's version number and OS on error pages and in HTTP response headers, turn off the <code>server_tokens</code> directive in the http context in the <code>/etc/nginx/nginx.conf</code> configuration file.</p> <pre><code>http {\n        server_tokens off;\n}\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#custom-nginx-server-name","title":"Custom Nginx server name","text":"<p>To customize the server name returned by Nginx, set the following in <code>/etc/nginx/nginx.conf</code>:</p> <pre><code>http {\n        more_set_headers 'Server: your_custom_server_name';\n}\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#client-certificate-authentication","title":"Client certificate authentication","text":"","tags":["nginx","web","server"]},{"location":"linux/nginx/#openssl-coniguration","title":"OpenSSL coniguration","text":"<p>Config file is <code>/etc/ssl/openssl.cnf</code>:</p> <pre><code>[ ca ]\ndefault_ca = CA_default                 # The name of the CA configuration to be used.\n                                        # can be anything that makes sense to you.\n[ CA_default ]\ndir = /etc/ssl/ca                       # Directory where everything is kept\ncerts = $dir/certs                      # Directory where the issued certs are kept\ncrl_dir = $dir/crl                      # Directory where the issued crl are kept\ndatabase = $dir/index.txt               # database index file.\n#unique_subject = no                    # Set to 'no' to allow creation of\n                                        # several certificates with same subject.\nnew_certs_dir = $dir/certs              # Default directory for new certs.\n\ncertificate = $dir/ca.crt               # The CA certificate\nserial = $dir/serial                    # The current serial number\ncrlnumber = $dir/crlnumber              # The current crl number\n                                        # must be commented out to leave a V1 CRL\ncrl = $dir/crl.pem                      # The current CRL\nprivate_key = $dir/private/ca.key       # The private key\nRANDFILE    = $dir/private/.rand        # private random number file\n\nx509_extensions = usr_cert              # The extentions to add to the cert\n\nname_opt = ca_default                   # Subject Name options\ncert_opt = ca_default                   # Certificate field options\n\ndefault_days    = 365                   # how long to certify for\ndefault_crl_days= 30                    # how long before next CRL\ndefault_md    = sha1                    # use public key default MD\npreserve    = no                        # keep passed DN ordering\n\npolicy = policy_match\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#directory-creation","title":"Directory creation:","text":"<pre><code>$ mkdir -p /etc/ssl/ca/certs/users &amp;&amp; \\\n$ mkdir /etc/ssl/ca/crl &amp;&amp; \\\n$ mkdir /etc/ssl/ca/private\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#database-index-and-crl-number-creation","title":"Database index and CRL number creation:","text":"<pre><code>$ touch /etc/ssl/ca/index.txt &amp;&amp; echo 01 &gt; /etc/ssl/ca/crlnumber\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#certificate-authorithy-creation","title":"Certificate Authorithy creation:","text":"<pre><code>$ openssl genrsa -des3 -out /etc/ssl/ca/private/ca.key 4096\n$ openssl req -new -x509 -days 1095 \\\n    -key /etc/ssl/ca/private/ca.key \\\n    -out /etc/ssl/ca/certs/ca.crt\n$ openssl ca -name CA_default -gencrl \\\n    -keyfile /etc/ssl/ca/private/ca.key \\\n    -cert /etc/ssl/ca/certs/ca.crt \\\n    -out /etc/ssl/ca/private/ca.crl \\\n    -crldays 1095\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#user-certificate-generation","title":"User certificate generation:","text":"<pre><code>$ openssl genrsa -des3 -out /etc/ssl/ca/certs/users/USERNAME.key 1024\n$ openssl req -new -key /etc/ssl/ca/certs/users/USERNAME.key \\\n    -out /etc/ssl/ca/certs/users/USERNAME.csr\n$ openssl x509 -req -days 1095 \\\n    -in /etc/ssl/ca/certs/users/USERNAME.csr \\\n    -CA /etc/ssl/ca/certs/ca.crt \\\n    -CAkey /etc/ssl/ca/private/ca.key \\\n    -CAserial /etc/ssl/ca/serial \\\n    -CAcreateserial \\\n    -out /etc/ssl/ca/certs/users/USERNAME.crt\n$ openssl pkcs12 -export -clcerts \\\n    -in /etc/ssl/ca/certs/users/USERNAME.crt \\\n    -inkey /etc/ssl/ca/certs/users/USERNAME.key \\\n    -out /etc/ssl/ca/certs/users/USERNAME.p12\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#nginx-configuration","title":"Nginx configuration:","text":"<pre><code>$ ssl_client_certificate /etc/ssl/ca/certs/ca.crt;\n$ ssl_crl /etc/ssl/ca/private/ca.crl;\n$ ssl_verify_client on;\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/nginx/#user-revocation","title":"User revocation:","text":"<pre><code>$ openssl ca -name CA_Default \\\n    -revoke /etc/ssl/ca/certs/users/USERNAME.crt \\\n    -keyfile /etc/ssl/ca/private/ca.key \\\n    -cert /etc/ssl/ca/certs/ca.crt\n$ openssl ca -name CA_Default -gencrl \\\n    -keyfile /etc/ssl/ca/private/ca.key \\\n    -cert /etc/ssl/ca/certs/ca.crt \\\n    -out /etc/ssl/ca/private/ca.crl \\\n    -crldays 1095\n</code></pre>","tags":["nginx","web","server"]},{"location":"linux/opkg/","title":"opkg","text":"<p><code>opkg</code> is a lightweight package manager designed to add software to stock firmware of embedded devices.</p> <p>Note</p> <p><code>opkg</code> is the package manager used on the QNAP TS-873A.</p>","tags":["opkg","ipkg","package","Entware","Optware"]},{"location":"linux/opkg/#installation","title":"Installation","text":"<p>Open the QNAP App Center, add the Qnapclub repository and install the <code>Entware-std</code> package. For more information between Entware's <code>standard</code> and <code>alternative</code> installation, refer to the dedicated Entware wiki page.</p>","tags":["opkg","ipkg","package","Entware","Optware"]},{"location":"linux/opkg/#configuration","title":"Configuration","text":"","tags":["opkg","ipkg","package","Entware","Optware"]},{"location":"linux/opkg/#download-packages-via-tls","title":"Download packages via TLS","text":"<p>Install wget as <code>opkg</code> uses it to fetch packages from repositories:</p> <pre><code>$ opkg install wget ca-certificates\n</code></pre> <p>Update <code>opkg</code> repository URL:</p> <pre><code>$ sed -i 's/http:\\/\\//https:\\/\\//g' /opt/etc/opkg.conf\n</code></pre>","tags":["opkg","ipkg","package","Entware","Optware"]},{"location":"linux/opkg/#usage","title":"Usage","text":"","tags":["opkg","ipkg","package","Entware","Optware"]},{"location":"linux/opkg/#fix-broken-packages-after-opkg-upgrade","title":"Fix broken packages after <code>opkg upgrade</code>","text":"<pre><code>$ opkg update\n$ opkg upgrade\n$ minidlna\n  minidlna: error while loading shared libraries: libpng12.so.0: cannot open shared object file: No such file or director\n</code></pre> <p>Unfortunately, opkg isn't sophisticated enough to react to the fact that the minidlna dependencies have changed and that minidlna should be re-installed too. Instead, you have to do that manually:</p> <pre><code>$ opkg --autoremove remove minidlna\n$ opkg install minidlna\n</code></pre> <p>As a last resort, if the solution provided above doesn't work, try the following:</p> <pre><code>$ opkg list-installed | grep -v \"libc \" | sed 's/ - .*$//' | grep ^lib | grep -v libpthread | grep -v libgcc | xargs -n 5 opkg --force-reinstall install\n</code></pre>","tags":["opkg","ipkg","package","Entware","Optware"]},{"location":"linux/rutorrent/","title":"ruTorrent","text":"","tags":["ruTorrent","web"]},{"location":"linux/rutorrent/#configuration","title":"Configuration","text":"","tags":["ruTorrent","web"]},{"location":"linux/rutorrent/#moving-torrents-upon-completion","title":"Moving torrents upon completion","text":"<p><code>ruTorrent</code> can automate moving torrents upon completion using the Autotools plugin. Moving torrents may come in handy in when using multiple libraries in <code>Plex Media Server</code>.</p> <ol> <li>In <code>ruTorrent</code>, choose <code>Settings &gt; Autotools</code>.</li> <li>Enable \"Autolabel\" feature, Template: <code>{DIR}</code></li> <li>Enable \"AutoMove\" if torrent's label matches filter: <code>/anime|apps|ebooks|movies|music|series/</code></li> <li>Set path to finished downloads: <code>/share/data/torrents</code>, operation type <code>Move</code> and enable <code>Add torrent's label to path</code></li> </ol> <p>This setup will move any labeled torrent to <code>/share/data/torrents/&lt;label&gt;/&lt;torrent_name&gt;</code>.</p>","tags":["ruTorrent","web"]},{"location":"linux/rutorrent/#fix-missing-label-icons","title":"Fix missing label icons","text":"<p>The tracklabels plugin stores it's 16x16 pixel .png images under <code>/rutorrent/plugins/tracklabels/labels/</code>. Adding missing label icons is as easy as copying an existing icon to a different name:</p> <pre><code>$ cp /opt/var/www/rutorrent/plugins/tracklabels/labels/movie.png /opt/var/www/rutorrent/plugins/tracklabels/labels/movies.png\n$ cp /opt/var/www/rutorrent/plugins/tracklabels/labels/books.png /opt/var/www/rutorrent/plugins/tracklabels/labels/ebooks.png\n</code></pre>","tags":["ruTorrent","web"]},{"location":"linux/ssh/","title":"ssh","text":"","tags":["ssh","shell","network","protocol","key","fingerprint"]},{"location":"linux/ssh/#usage","title":"Usage","text":"","tags":["ssh","shell","network","protocol","key","fingerprint"]},{"location":"linux/ssh/#get-ssh-key-fingerprint","title":"Get SSH key fingerprint","text":"<pre><code>$ ssh-keygen -lf id_martinsimon.pub\n256 SHA256:btO1ftKaZ1AxBLvfuFLS2J4a6Aw6aNStsnB6FB23e7g me@martinsimon.me (ED25519)\n</code></pre> <p>In newer versions of OpenSSH, Base64 encoded SHA-256 is shown instead of hexadecimal MD5. To show the legacy style hash, use:</p> <pre><code>$ ssh-keygen -l -E md5 -f id_martinsimon.pub\n256 MD5:f0:cc:6d:7c:3c:84:15:c1:d0:52:57:c2:c4:1e:c5:09 me@martinsimon.me (ED25519)\n</code></pre> <p>However, if you\u2019re dealing with the fingerprints that Amazon shows in the EC2 Key Pairs console, unfortunately that may be a different beast. If it\u2019s a 32-digit hex string, it\u2019s the standard MD5 SSH public key fingerprint above. But if it\u2019s 40 hex digits, it\u2019s actually a fingerprint computed by taking the SHA1 of the private key in PKCS#8 format:</p> <pre><code>$ openssl pkcs8 -in aws_root -nocrypt -topk8 -outform DER | openssl sha1 -c\n(stdin)= 82:90:cb:b6:c4:ce:ee:e4:d5:f6:13:76:48:07:49:4d:a9:8d:cc:f2\n</code></pre> <p>     Source: superuser </p>","tags":["ssh","shell","network","protocol","key","fingerprint"]},{"location":"linux/systemd/","title":"systemd","text":"","tags":["systemd","system manager","service manager","init system","process"]},{"location":"linux/systemd/#configuration","title":"Configuration","text":"","tags":["systemd","system manager","service manager","init system","process"]},{"location":"linux/systemd/#slow-boot-waiting-for-systemd-networkd-wait-online","title":"Slow boot, waiting for systemd-networkd-wait-online","text":"<p>By default, <code>systemd-networkd-wait-online.service</code> waits for all links it is aware of and which are managed by systemd-networkd to be fully configured or failed, and for at least one link to be online.</p> <p>If your system has multiple network interfaces, but some are not expected to be connected all the time (e.g. if you have a dual-port Ethernet card, but only one cable plugged in), starting <code>systemd-networkd-wait-online.service</code> will fail after the default timeout of 2 minutes. This may cause an unwanted delay in the startup process. To change the behaviour to wait for any interface rather than all interfaces to become online, edit the service and add the <code>--any</code> parameter to the <code>ExecStart</code> line:</p> <pre><code>$ cat /etc/systemd/system/network-online.target.wants/systemd-networkd-wait-online.service\n#  SPDX-License-Identifier: LGPL-2.1+\n#\n#  This file is part of systemd.\n#\n#  systemd is free software; you can redistribute it and/or modify it\n#  under the terms of the GNU Lesser General Public License as published by\n#  the Free Software Foundation; either version 2.1 of the License, or\n#  (at your option) any later version.\n\n[Unit]\nDescription=Wait for Network to be Configured\nDocumentation=man:systemd-networkd-wait-online.service(8)\nDefaultDependencies=no\nConflicts=shutdown.target\nRequires=systemd-networkd.service\nAfter=systemd-networkd.service\nBefore=network-online.target shutdown.target\n\n[Service]\nType=oneshot\nExecStart=/lib/systemd/systemd-networkd-wait-online --any\nRemainAfterExit=yes\n\n[Install]\nWantedBy=network-online.target\n</code></pre> <p>Note</p> <p>This issue occurs on the Helios64.</p> <p>     Source: wiki.archlinux.org </p>","tags":["systemd","system manager","service manager","init system","process"]},{"location":"linux/systemd/#restart-service-after-x-amount-of-time","title":"Restart service after X amount of time","text":"<p>Let's assume one needs to restart service <code>X</code> every hour. Instead of using a CRON job, the following lines could simply be added to the <code>systemd</code> service unit file:</p> <pre><code>[Service]\nRuntimeMaxSec=&lt;seconds after which to restart&gt;\nRestart=always\n</code></pre>","tags":["systemd","system manager","service manager","init system","process"]},{"location":"linux/wsl/","title":"Windows Subsystem for Linux (WSL)","text":"","tags":["Linux","Debian","Windows"]},{"location":"linux/wsl/#installation","title":"Installation","text":"","tags":["Linux","Debian","Windows"]},{"location":"linux/wsl/#git","title":"Git","text":"<p><code>WSLGit</code> provides a small executable that forwards all arguments to <code>git</code> running inside Bash on Windows/Windows Subsystem for Linux (WSL).</p> <pre><code>$ wget -P /mnt/c/Program\\ Files/Git/cmd -O git.exe https://github.com/andy-5/wslgit/releases/download/v1.0.1/wslgit.exe\n</code></pre>","tags":["Linux","Debian","Windows"]},{"location":"linux/wsl/#configuration","title":"Configuration","text":"","tags":["Linux","Debian","Windows"]},{"location":"linux/wsl/#terminal-profile-icons","title":"Terminal profile icons","text":"<p>Place the icon image <code>debian.png</code> in the folder located at <code>%LOCALAPPDATA%\\Packages\\Microsoft.WindowsTerminal_8wekyb3d8bbwe\\RoamingState</code>, then add the following line to your Windows Terminal <code>settings.json</code>:</p> <pre><code>\"icon\": \"ms-appdata:///roaming/debian.png\",\n</code></pre>","tags":["Linux","Debian","Windows"]},{"location":"linux/wsl/#ssh-key-management","title":"SSH key management","text":"<p>In (Admin) Powershell:</p> <pre><code>Get-Service -Name ssh-agent | Set-Service -StartupType Automatic\nStart-Service ssh-agent\n</code></pre> <p>Then from any user shell:</p> <pre><code>ssh-add /path/to/.ssh/id_rsa\n</code></pre>","tags":["Linux","Debian","Windows"]},{"location":"miscellaneous/vanced/","title":"YouTube Vanced","text":"","tags":["Google","Youtube","Vanced","ads"]},{"location":"miscellaneous/vanced/#configuration","title":"Configuration","text":"","tags":["Google","Youtube","Vanced","ads"]},{"location":"miscellaneous/vanced/#using-youtubetm-vanced-with-google-workspace","title":"Using YouTube\u2122 Vanced with Google Workspace","text":"<p>Using Vanced in conjunction with a Google Workspace (formerly Google G Suite) account results in Vanced returning the error <code>Please check your internet connection</code> as well as the newly added account being greyed out and unselectable.</p> <p>All \"fixes\" trying to remove the account from the Google app and uninstalling both Youtube Vanced and MicroG fail.</p> <p>To allow Vanced to connect to your Google Workspace account, do the following:</p> <ol> <li>Log in to the Google Admin console.</li> <li>Choose Devices, then in the left navigation bar choose Settings &gt; Universal Settings.</li> <li>In the General section, choose Mobile management.</li> <li>Select Turn off mobile management (Unmanaged).</li> </ol> <p>You should now be able to use your Google Workspace account to login to Vanced. </p>","tags":["Google","Youtube","Vanced","ads"]},{"location":"networking/ethernet/","title":"Ethernet","text":"<p>There are two wiring standards used by RJ45 connectors, referred to as T568A and T568B. The difference is the pin assignment for the green and orange pairs. T568A pinouts are the most commonly used but either will work so long as both ends of the cable are similarly wired.</p> PIN SIGNAL T568A T568B 1 TX+ White/Green White/Orange 2 TX- Green Orange 3 RX+ White/Orange White/Green 4 TRD2+ Blue Blue 5 TRD2- White/Blue White/Blue 6 RX- Orange Green 7 TRS3+ White/Brown White/Brown 8 TRS3- Brown Brown <p>Cables with T568A wiring on one end and T568B on the other are known as \"crossover\" cables. You can identify a crossover cable by comparing the order of wires on each end. If the wires are the same on each end (regardless of which pin configuration is used), it is a \"straight-through\" cable. If they are different, it is a crossover cable.</p> <p>Nowadays, most Ethernet switches and routers have a feature called auto-MDIX, which can detect which type of port or cable (crossover or straight-through) is connected and swap the transmit and receive pins accordingly, removing the need for crossover wiring.</p>","tags":["ethernet","RJ45","network"]},{"location":"networking/ethernet/#ethernet-categories","title":"Ethernet Categories","text":"Category Max. Data Rate Max. Bandwidth Max. Distance Shielding Usage Cat. 1 1 Mbps 0.4 MHz No Telephone and modem lines Cat. 2 4 Mbps 4 MHz No LocalTalk &amp; Telephone Cat. 3 10 Mbps 16 MHz 100 m No 10BaseT Ethernet Cat. 4 16 Mbps 20 MHz 100 m No Token Ring Cat. 5 100 Mbps 100 MHz 100 m No 100BaseT Ethernet Cat. 5e 1 Gbps 100 MHz 100 m No 100BaseT Ethernet, residential homes Cat. 6 1 Gbps 250 MHz 100 m  10Gb at 37 m Sometimes 10Gb at 37 m (121 ft.) Cat. 6a 10 Gbps 500 MHz 100 m Sometimes Gigabit Ethernet in data centers and commercial buildings Cat. 7 10 Gbps 600 MHz 100 m Yes 10 Gbps Core Infrastructure Cat. 7a 10 Gbps 1000 MHz 100 m  40Gb at 50 m Yes 10 Gbps Core Infrastructure Cat. 8 25 Gbps (Cat8.1)40 Gbps (Cat8.2) 2000 MHz 30 m (98 ft.) Yes 25 Gbps/40 Gbps Core Infrastructure <p> Source </p>","tags":["ethernet","RJ45","network"]},{"location":"networking/ethernet/#shielded-cable-types","title":"Shielded cable types","text":"<ul> <li> <p>F/UTP \u2013 Foiled/Unshielded Twisted Pair: Common in Fast Ethernet deployments, this cable will have a foil shield that wraps around unshielded twisted pairs.</p> </li> <li> <p>S/UTP \u2013 Braided Shielding/ Unshielded Twisted Pair: This cable will wrap a braided shield around unshielded twisted pairs.</p> </li> <li> <p>SF/UTP \u2013 Braided Shielding+Foil/Unshielded Twisted Pairs: This cable braids a shield around a foil wrap to enclose unshielded twisted pairs.</p> </li> <li> <p>S/FTP\u2013 Braided Shielding/Foiled Twisted Pair: This cable wraps a braided shield around all four copper pairs. Additionally, each twisted pair is enveloped in foil.</p> </li> <li> <p>F/FTP-Foiled/Foiled Twisted Pair: This cable encloses all copper pairs in foil. Additionally, each twisted pair is enveloped in foil.</p> </li> <li> <p>U/FTP-Unshielded/Foiled Twisted Pairs: This cable only envelopes the twisted pairs in foil.</p> </li> <li> <p>U/UTP-Unshielded/UnshieldedTwisted Pair: No sheathing is used. Standard Cat5e cable are examples of U/UTP cables.</p> </li> </ul>","tags":["ethernet","RJ45","network"]},{"location":"networking/ethernet/#shielding-code","title":"Shielding code:","text":"<ul> <li>TP: Twisted Pair</li> <li>U: Unshielded or Unscreened</li> <li>F: Foil Shielding</li> <li>S: Braided Shielding</li> </ul> <p> Source </p>","tags":["ethernet","RJ45","network"]},{"location":"networking/ethernet/#power-over-ethernet-poe","title":"Power over Ethernet (PoE)","text":"PoE PoE+ PoE++ PoE++ IEEE-Standard 802.3af 802.3at 802.3bt 802.3bt PoE Type Type 1 Type 2 Type 3 Type 4 Max. Power per Port 15,4 W 30 W 60 W 100 W Voltage Range (at Switch) 44\u201357V 50-57V 50-57V 52-57V Max. Power to Device 12,95 W 25,5 W 51 W 71 W Voltage Range to Device 37-57V 42,5\u201357V 42,5\u201357V 41,1-57V Twisted Pairs Used 2-pair 2-pair 4-pair 4-pair Supported cable Cat3 or better Cat5 or better Cat5 or better Cat5 or better Supported devices Access Points IP-Video telephones Laptops TV sets","tags":["ethernet","RJ45","network"]},{"location":"networking/ipv6/","title":"IPv6","text":"","tags":["internet","protocol","network"]},{"location":"networking/ipv6/#subnet-prefix-lengths","title":"Subnet prefix lengths","text":"<pre><code>2402:9400:0000:0000:0000:0000:0000:0001\nXXXX:XXXX:XXXX:XXXX:XXXX:XXXX:XXXX:XXXX\n      ||| |||| |||| |||| |||| |||| ||||\n      ||| |||| |||| |||| |||| |||| |||128\n      ||| |||| |||| |||| |||| |||| ||124\n      ||| |||| |||| |||| |||| |||| |120\n      ||| |||| |||| |||| |||| |||| 116\n      ||| |||| |||| |||| |||| |||112\n      ||| |||| |||| |||| |||| ||108\n      ||| |||| |||| |||| |||| |104\n      ||| |||| |||| |||| |||| 100\n      ||| |||| |||| |||| |||96\n      ||| |||| |||| |||| ||92\n      ||| |||| |||| |||| |88\n      ||| |||| |||| |||| 84\n      ||| |||| |||| |||80\n      ||| |||| |||| ||76\n      ||| |||| |||| |72\n      ||| |||| |||| 68\n      ||| |||| |||64\n      ||| |||| ||60\n      ||| |||| |56\n      ||| |||| 52\n      ||| |||48\n      ||| ||44\n      ||| |40\n      ||| 36\n      ||32\n      |28\n      24\n</code></pre>","tags":["internet","protocol","network"]},{"location":"networking/ipv6/#subnet-size","title":"Subnet size","text":"IPv6 CIDR Subnet Number of IPs /128 1 /127 2 /126 4 /125 8 /124 16 /123 32 /122 64 /121 128 /120 256 /119 512 /118 1,024 /117 2,048 /116 4,096 /115 8,192 /114 16,384 /113 32,768 /112 65,536 /111 131,072 /110 262,144 /109 524,288 /108 1,048,576 /107 2,097,152 /106 4,194,304 /105 8,388,608 /104 16,777,216 /103 33,554,432 /102 67,108,864 /101 134,217,728 /100 268,435,456 /99 536,870,912 /98 1,073,741,824 /97 2,147,483,648 /96 4,294,967,296 /95 8,589,934,592 /94 17,179,869,184 /93 34,359,738,368 /92 68,719,476,736 /91 137,438,953,472 /90 274,877,906,944 /89 549,755,813,888 /88 1,099,511,627,776 /87 2,199,023,255,552 /86 4,398,046,511,104 /85 8,796,093,022,208 /84 17,592,186,044,416 /83 35,184,372,088,832 /82 70,368,744,177,664 /81 140,737,488,355,328 /80 281,474,976,710,656 /79 562,949,953,421,312 /78 1,125,899,906,842,624 /77 2,251,799,813,685,248 /76 4,503,599,627,370,496 /75 9,007,199,254,740,992 /74 18,014,398,509,481,985 /73 36,028,797,018,963,968 /72 72,057,594,037,927,936 /71 144,115,188,075,855,872 /70 288,230,376,151,711,744 /69 576,460,752,303,423,488 /68 1,152,921,504,606,846,976 /67 2,305,843,009,213,693,952 /66 4,611,686,018,427,387,904 /65 9,223,372,036,854,775,808 Residential \u2013 /64 18,446,744,073,709,551,616 /63 36,893,488,147,419,103,232 /62 73,786,976,294,838,206,464 /61 147,573,952,589,676,412,928 /60 295,147,905,179,352,825,856 /59 590,295,810,358,705,651,712 /58 1,180,591,620,717,411,303,424 /57 2,361,183,241,434,822,606,848 /56 4,722,366,482,869,645,213,696 /55 9,444,732,965,739,290,427,392 /54 18,889,465,931,478,580,854,784 /53 37,778,931,862,957,161,709,568 /52 75,557,863,725,914,323,419,136 /51 151,115,727,451,828,646,838,272 /50 302,231,454,903,657,293,676,544 /49 604,462,909,807,314,587,353,088 Business \u2013 /48 1,208,925,819,614,629,174,706,176 /47 2,417,851,639,229,258,349,412,352 /46 4,835,703,278,458,516,698,824,704 /45 9,671,406,556,917,033,397,649,408 /44 19,342,813,113,834,066,795,298,816 /43 38,685,626,227,668,133,590,597,632 /42 77,371,252,455,336,267,181,195,264 /41 154,742,504,910,672,534,362,390,528 /40 309,485,009,821,345,068,724,781,056 /39 618,970,019,642,690,137,449,562,112 /38 1,237,940,039,285,380,274,899,124,224 /37 2,475,880,078,570,760,549,798,248,448 /36 4,951,760,157,141,521,099,596,496,896 /35 9,903,520,314,283,042,199,192,993,792 /34 19,807,040,628,566,084,398,385,987,584 /33 39,614,081,257,132,168,796,771,975,168 ISP \u2013 /32 79,228,162,514,264,337,593,543,950,336 /31 158,456,325,028,528,675,187,087,900,672 /30 316,912,650,057,057,350,374,175,801,344 /29 633,825,300,114,114,700,748,351,602,688 /28 1,267,650,600,228,229,401,496,703,205,376 /27 2,535,301,200,456,458,802,993,406,410,752 /26 5,070,602,400,912,917,605,986,812,821,504 /25 10,141,204,801,825,835,211,973,625,643,008 /24 20,282,409,603,651,670,423,947,251,286,016 /23 40,564,819,207,303,340,847,894,502,572,032 /22 81,129,638,414,606,681,695,789,005,144,064 /21 162,259,276,829,213,363,391,578,010,288,128 /20 324,518,553,658,426,726,783,156,020,576,256 /19 649,037,107,316,853,453,566,312,041,152,512 /18 1,298,074,214,633,706,907,132,624,082,305,024 /17 2,596,148,429,267,413,814,265,248,164,610,048 /16 5,192,296,858,534,827,628,530,496,329,220,096 /15 10,384,593,717,069,655,257,060,992,658,440,192 /14 20,769,187,434,139,310,514,121,985,316,880,384 /13 41,538,374,868,278,621,028,243,970,633,760,768 /12 83,076,749,736,557,242,056,487,941,267,521,536 /11 166,153,499,473,114,484,112,975,882,535,043,072 /10 332,306,998,946,228,968,225,951,765,070,086,144 /9 664,613,997,892,457,936,451,903,530,140,172,288 /8 1,329,227,995,784,915,872,903,807,060,280,344,576","tags":["internet","protocol","network"]},{"location":"networking/ipv6/#example-allocations","title":"Example allocations","text":"<p><code>/64</code> IPv6 allocations are usually given to end users, who do not require any VLANs. It allows auto configuration, or SLAAC so makes life a lot easier when configuring.</p> <pre><code>2402:9400:1000:0::/64\n2402:9400:1000:1::/64\n2402:9400:1000:2::/64\n2402:9400:1000:3::/64\n2402:9400:1000:4::/64\n2402:9400:1000:5::/64\n2402:9400:1000:6::/64\n2402:9400:1000:7::/64\n2402:9400:1000:8::/64\n2402:9400:1000:9::/64\n2402:9400:1000:a::/64\n2402:9400:1000:b::/64\n2402:9400:1000:c::/64\n2402:9400:1000:e::/64\n2402:9400:1000:e::/64\n2402:9400:1000:f::/64\n2402:9400:1000:10::/64\n2402:9400:1000:11::/64\n</code></pre> <p><code>/48</code> allocations are usually provided to business, who require additional VLANs or may require the range to be split up.</p> <pre><code>2402:9400:10::/48\n2402:9400:11::/48\n2402:9400:12::/48\n2402:9400:13::/48\n2402:9400:14::/48\n2402:9400:15::/48\n2402:9400:16::/48\n2402:9400:17::/48\n2402:9400:18::/48\n2402:9400:19::/48\n2402:9400:1a::/48\n2402:9400:1b::/48\n2402:9400:1c::/48\n2402:9400:1e::/48\n2402:9400:1f::/48\n2402:9400:20::/48\n</code></pre>","tags":["internet","protocol","network"]},{"location":"programming/git/","title":"Git","text":"","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#configuration","title":"Configuration","text":"","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#setting-up-multiple-git-profiles","title":"Setting up multiple Git profiles","text":"<p>When using git as the version control tool for both personal and work related projects, it might be interesting to isolate the two (or more) profiles.</p> <p>In your home directory, create the following files:</p> <pre><code>$ ls -la\n-rw-rw-rw-  1 root root  483 Aug 25 08:07 .gitconfig\n-rw-rw-rw-  1 root root   57 Apr  2  2021 .gitconfig-personal\n-rw-r--r--  1 root root   57 Aug  5  2021 .gitconfig-work\n</code></pre> <p>Add the following to <code>.gitconfig</code>:</p> <pre><code>[includeIf \"gitdir:/path/to/personal/projects/directory\"]\n    path = .gitconfig-personal\n[includeIf \"gitdir:/path/to/work/projects/directory\"]\n    path = .gitconfig-work\n[...]\n</code></pre> <p>Each subsequent configuration file can then define it's own user and Git settings, e.g.:</p> <pre><code>$ cat .gitconfig-personal\n[user]\n  name = John Doe\n  email = john.doe@personal.com\n[help]\n  autocorrect = 1\n$ cat .gitconfig-work\n[user]\n  name = John Doe\n  email = john.doe@work.com\n[diff]\n  tool = icdiff\n[difftool]\n  prompt = false\n[icdiff]\n  options = --highlight --line-numbers\n</code></pre>","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#automatically-sign-commits","title":"Automatically sign commits","text":"<p>On Debian:</p> <pre><code>$ apt-get install gnupg2\n$ gpg2 --import file.asc\n$ gpg2 --list-secret-keys --keyid-format=long\n/root/.gnupg/pubring.kbx\n------------------------\nsec   rsa4096/632C9BB6CF21205A 2015-09-30 [SC]\n      6F2B0C373EBE0DD7975D51B9632C2AA6CF21205A\nuid                 [ unknown] John Doe &lt;john.doe@personal.com&gt;\nssb   rsa4096/9C04F25B59B68D59 2015-09-30 [E]\n\n$ eval \"$(keychain --stop others --quiet --quick --eval --agents gpg,ssh\\\n    --inherit any --timeout 31622400 ~/.ssh/id_example1 ~/.ssh/id_example2\\\n    ~/.ssh/id_example3 632C9BB6CF21205A)\"\n$ echo \"test\" | gpg2 --clearsign\n</code></pre> <p>Add the following to <code>.gitconfig</code>:</p> <pre><code>[commit]\n  gpgsign = true\n[gpg]\n  program = gpg2\n</code></pre> <p>and the following to <code>.gitconfig-xxxxxxx</code></p> <pre><code>  signingkey = 632C9BB6CF21205A\n</code></pre>","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#usage","title":"Usage","text":"","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#anonymous-git-commits","title":"Anonymous Git commits","text":"<p>From inside your local git repository:</p> <pre><code>$ git config user.name 'Anonymous'\n$ git config user.email '&lt;&gt;'\n</code></pre> <p>     Source: Stackoverflow </p>","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#squash-last-n-commits","title":"Squash last <code>&lt;n&gt;</code> commits","text":"<p>If you want to write the new commit message from scratch, this suffices:</p> <pre><code>$ git reset --soft HEAD~&lt;n&gt;\n$ git commit\n$ git push -f\n</code></pre> <p>If you want to start editing the new commit message with a concatenation of the existing commit messages (i.e. similar to what a\\ pick/squash/squash/\u2026/squash <code>git rebase -i</code> instruction list would start you with), then you need to extract those messages and pass them to <code>git commit</code>:</p> <pre><code>$ git reset --soft HEAD~&lt;n&gt;\n$ git commit --edit -m\"$(git log --format=%B --reverse HEAD..HEAD@{1})\"\n$ git push -f\n</code></pre> <p>     Source: Stackoverflow </p>","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#squash-all-commits-into-one","title":"Squash all commits into one","text":"<p>Make sure everything is committed, and write down the latest <code>commit_id</code> in case something goes wrong, or create a separate branch as a backup.</p> <p>Reset your head to the first commit, but leave your index unchanged. All changes since the first commit will now appear ready to be committed.</p> <pre><code>$ git reset --soft `git rev-list --max-parents=0 --abbrev-commit HEAD`\n</code></pre> <p>Amend your commit to the first commit and change the commit message.</p> <pre><code>$ git commit --amend -m \"initial commit\"\n\n# if you want to keep the existing commit message\n$ git commit --amend --no-edit\n</code></pre> <p>Force push your changes.</p> <pre><code>user@host:~$ git push -f\n</code></pre> <p>     Source: Stackoverflow </p>","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#delete-tags","title":"Delete tags","text":"<p>For a local tag, use</p> <pre><code>$ git tag -d &lt;tag_name&gt;\n</code></pre> <p>For a remote tag (if you've already pushed the tag)</p> <pre><code>$ git push --delete origin &lt;tag_name&gt;\n</code></pre>","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#syncing-a-fork","title":"Syncing a fork","text":"<pre><code>$ git fetch upstream\n$ git checkout master\n$ git merge upstream/master\n</code></pre>","tags":["Git","Github","repository","branch"]},{"location":"programming/git/#commit-only-part-of-a-files-changes","title":"Commit only part of a file's changes","text":"<p>Use <code>git add -e myfile</code> to open the file in a text editor and choose which lines you'd like to stage and which you want to ignore.</p> <p>As you may known lines that start with + are addtions, lines that start with - are deletions. So:</p> <pre><code>To not stage an addition just delete that line.\nTo not stage a deletion just replace - with space\n</code></pre>","tags":["Git","Github","repository","branch"]}]}